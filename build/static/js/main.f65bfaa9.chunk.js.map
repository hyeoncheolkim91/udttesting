{"version":3,"sources":["components/Theme/index.js","components/HeaderPopupBox/index.js","components/DownloadButton/index.js","components/HeaderToolbar/index.js","components/StartingPage/templates.js","components/HeaderDrawer/index.js","components/Header/index.js","components/SimpleDialog/index.js","components/CreateFromTemplateDialog/index.js","utils/use-posthog.js","utils/from-udt-csv.js","components/StartingPage/index.js","components/DatasetEditor/EditableTitleText.js","utils/get-brush-color-palette.js","components/SampleGrid/index.js","components/PasteUrlsDialog/index.js","components/TextAreaWithUpload/index.js","components/ImportUDTFileDialog/index.js","components/ImportToyDatasetDialog/index.js","components/ImportPage/index.js","components/SamplesView/index.js","components/ConfigureImageClassification/index.js","components/WorkspaceContainer/index.js","components/ImageClassification/index.js","components/BadOHA/index.js","components/EmptySampleContainer/index.js","components/UniversalDataViewer/index.js","utils/sentry.js","components/LabelErrorBoundary/index.js","components/ConfigureInterface/index.js","components/PaperContainer/index.js","components/HotkeyStorage/default-hotkeys.js","components/HotkeyStorage/index.js","components/AppConfig/index.js","components/KeyboardShortcutManagerDialog/index.js","components/AdvancedOptionsView/index.js","components/InterfacePage/index.js","components/EditSampleDialog/index.js","components/Toasts/index.js","components/Stats/index.js","components/LabelView/index.js","components/DatasetEditor/index.js","utils/use-time-to-complete-sample.js","components/ErrorToasts/index.js","utils/file-handlers/use-server/get-human-readable-log.js","utils/file-handlers/use-server/apply-seamless-patch.js","utils/file-handlers/use-server/server-hash.js","utils/file-handlers/use-server/index.js","utils/file-handlers/use-server/handler.js","utils/to-udt-csv.js","utils/file-handlers/use-filesystem.js","utils/use-is-desktop.js","utils/file-handlers/index.js","utils/file-handlers/use-local-storage.js","components/AppErrorBoundary/index.js","utils/use-prevent-navigation.js","components/FileContext/index.js","components/LocalStorageApp/index.js","utils/use-errors.js","components/Loading/index.js","App.js","index.js"],"names":["theme","createMuiTheme","palette","primary","colors","secondary","typography","fontFamily","button","textTransform","children","ThemeProvider","borderColor","popupBoxBeforeAndAfter","bottom","left","border","content","height","width","position","pointerEvents","PopupBox","styled","zIndex","top","padding","boxSizing","borderRadius","backgroundColor","minHeight","boxShadow","borderBottomColor","borderWidth","marginLeft","fontSize","marginTop","color","opacity","transition","transform","open","className","Container","StyledButton","Button","justifyContent","display","marginRight","paddingTop","fontWeight","onDownload","useState","changeOpen","t","useTranslation","onMouseEnter","onMouseLeave","IconButton","HeaderPopupBox","fullWidth","onClick","useStyles","makeStyles","headerButton","grow","flexGrow","list","tab","fullHeightTab","mixins","toolbar","breakpoints","down","minWidth","tabWrapper","flexDirection","alignItems","marginBottom","getIcon","memo","tabs","currentTab","onChangeTab","additionalButtons","onOpenDrawer","isDesktop","title","fileOpen","isSmall","c","AppBar","Toolbar","variant","DownloadButton","length","Tabs","onChange","e","newTab","toLowerCase","value","map","Tab","key","classes","root","wrapper","icon","label","templates","name","Icon","Image","dataset","interface","type","labels","samples","imageUrl","templateMap","reduce","acc","onClickHome","onCloseDrawer","drawerOpen","onClickTemplate","onOpenFile","Drawer","onClose","List","ListItem","ListItemIcon","ListItemText","ListSubheader","template","window","location","href","HeaderContext","createContext","recentItems","changeRecentItems","onOpenRecentItem","inSession","onJoinSession","onCreateSession","onLeaveSession","sessionBoxOpen","changeSessionBoxOpen","authConfig","onUserChange","user","logoutUser","emptyArray","changeDrawerOpen","headerContext","useContext","useMediaQuery","useCallback","HeaderDrawer","StyledDialogTitle","DialogTitle","grey","borderBottom","paddingBottom","StyledDialogContent","DialogContent","StyledDialogActions","DialogActions","borderTop","markdownContent","redOn","red","noActionBar","actions","fullScreen","changeFullScreen","Dialog","Box","style","undefined","maxWidth","lineHeight","source","action","i","disabled","blue","text","bigButton","margin","bigIcon","onSelect","SimpleDialog","posthogInitialized","posthog","init","api_host","autocapture","domain","origin","capture","people","set","container","downloadIcon","languageSelectionWrapper","textAlign","ContentContainer","overflowY","Content","Title","Subtitle","ActionList","Action","cursor","textDecoration","ActionTitle","BottomSpacer","onOpenTemplate","usePosthog","i18n","createFromTemplateDialogOpen","changeCreateFromTemplateDialogOpen","CreateFromTemplateDialog","clicked_template","Header","Grid","xs","item","textField","editing","newValue","changeEditing","useEffect","isEmpty","listener","addEventListener","removeEventListener","timeout","setTimeout","SAVE_WAIT","clearTimeout","TextField","size","InputProps","inputProps","onKeyDown","preventDefault","stopPropagation","target","blur","onKeyPress","fadedGrey","isFaded","availableColors","colorMap","complete","incomplete","faded","review","brush","seed","flexWrap","EmptyState","SampleDiv","fontVariantNumeric","userSelect","Sample","index","completed","selected","onMouseDown","onMouseUp","classNames","getBrushColorPalette","p","n","count","useLocalStorage","samplesPerPage","changeSamplesPerPage","sampleOffset","changeSampleOffset","useReducer","state","Math","min","max","selectRange","changeSelectRange","startSelectRange","moveSelectRange","endSelectRange","checkAndNullifySelectRange","buttons","onClickMemo","useEventCallback","range","TablePagination","rowsPerPageOptions","component","rowsPerPage","page","floor","labelRowsPerPage","onChangePage","newPage","onChangeRowsPerPage","SelectContainer","TextArea","ErrorText","autoDetectOptions","onAddSamples","changeContent","urlType","changeURLType","error","setError","split","l","trim","filter","Boolean","s","extension","replace","slice","includes","pdfUrl","audioUrl","Error","toString","options","defaultValue","opt","v","placeholder","UploadHover","emptyFunc","onChangeContent","onDrop","acceptedFiles","reader","FileReader","onload","fileContent","result","readAsText","lastClickTime","changeLastClickTime","Date","now","getRootProps","useDropzone","getInputProps","isDragActive","badSpellingMap","Object","entries","document","correct","badSpellings","badSpelling","convertTaskDatumMistakes","sample","normalizedKey","correction","csv","json","JAC","fromCSV","derivePath","taskOutput","output","InfoText","whiteSpace","ImportUDTFileDialog","changeError","setContent","JSON","parse","e1","udt","fromUDTCSV","e2","console","log","message","jsonError","stack","csvError","TextAreaWithUpload","datasets","getSamples","a","datasetName","datasetUrl","fetch","then","r","taskData","ImportToyDatasetDialog","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","data-import-toy-dataset-name","ButtonBase","MuiButton","SelectDialogContext","desktopOnly","dialog","authConfiguredOnly","signedInOnly","onlySupportType","disabledText","Consumer","onChangeDialog","import_button","classnames","file","onChangeFile","onChangeDataset","selectedDialog","changeDialog","closeDialog","samplesToAdd","setIn","concat","Provider","AssignmentReturnedIcon","PetsIcon","DescriptionIcon","PasteUrlsDialog","SampleCounter","ExpandedRowContainer","borderTopLeftRadius","borderTopRightRadius","ExpandedRowTitle","ExpandedRowCode","ExpandedRow","data","annotation","input","spacing","stringify","SamplesView","openSampleInputEditor","openSampleLabelEditor","deleteSample","localStorage","lastSampleTab","changeTabState","changeTab","columns","useMemo","selector","sortable","knownKeys","Set","td","has","push","cell","row","add","raised","ImportPage","onImportPageShouldExit","newOHA","SampleGrid","sampleIndex","expandableRowsComponent","expandableRows","dense","pagination","paginationPerPage","paginationRowsPerPageOptions","form","questions","description","cellType","iface","defaultAnswers","allowMultiple","id","noActions","onQuestionChange","questionId","answers","HeaderLeftSideContainer","onNext","onPrev","currentSampleIndex","numberOfSamples","globalSampleIndex","titleContent","onClickHeaderItem","headerItems","Workspace","headerLeftSide","paddingLeft","iconSidebarItems","rightSidebarItems","brightColors","letters","getRandomColor","hashInt","indexOf","ImageContainer","objectFit","ButtonsContainer","paddingRight","flexShrink","CheckButton","emptyObj","emptyArr","containerProps","onSaveTaskOutputItem","availableLabels","changeSampleIndex","enlargedLabel","changeEnlargedLabel","currentOutput","changeCurrentOutput","onDone","onExit","onNextNoSave","newOutput","onClickLabel","without","hotkeyMap","backspace","enter","rightarrow","leftarrow","labelKeyMap","nextAvailableLetter","find","WorkspaceContainer","src","Checkbox","checked","explain","Typography","BadOHA","UniversalDataViewer","hideHeader","hideDescription","requireCompleteToPressNext","onClickSetup","EmptySampleContainer","ImageClassification","Sentry","dsn","whitelistUrls","ErrorBoundary","props","hasError","errorInfo","withScope","scope","setExtras","eventId","captureException","setState","this","errorString","React","Component","noop","BigButton","NoOptions","TypeButton","Heading","PreviewContainer","mouseEvents","PreviewContent","SelectType","currentlySelected","ConfigureInterface","onChangeProp","onClickEditJSON","isNested","previewChangedTime","changePreviewChangedTime","previewLoading","changePreviewLoading","hidden","lg","LabelErrorBoundary","ConfigureImageClassification","PaperContainer","defaultHotkeys","binding","HotkeyContext","hotkeys","changeHotkey","newBinding","useHotkeyStorage","HotkeyStorageProvider","useAppConfig","fromConfig","setInConfig","keyMap","contextValue","clearHotkeys","configKeyNames","AppConfigContext","appConfig","setAppConfig","newConfig","AppConfigProvider","table","hotkeyIconStyle","onChangeHotkey","hotkeyList","onClearHotkeys","selectedHotKey","setSelectedHotKey","modifier","setCurrentKeyCombo","keyListener","aria-label","align","hotkey","AdvancedOptionsView","onClearLabelData","useUpdate","hotkeyDialogOpen","setHotkeyDialogOpen","confirm","response","prompt","getItem","setItem","reload","KeyboardShortcutManagerDialog","isNotNested","sampleInput","changeText","newText","mode","editorProps","$blockScrolling","Infinity","right","msgBox","ToastContext","useToasts","addToast","ToastProvider","fullLife","messageType","random","life","msg","toasts","changeToasts","interval","setInterval","clearInterval","Collapse","in","Fade","Stat","Label","Value","stats","OverviewContainer","singleSampleDataset","onChangeSingleSampleDataset","selectedBrush","onChangeSampleTimeToComplete","sampleTimeToComplete","setTab","percentComplete","relativeIndex","newDataset","nextAction","startTime","interface_type","Stats","duration","saveIcon","editIcon","url","fileName","onFileDrop","initialMode","valueDisplay","setValueDisplay","changeMode","setSingleSampleDataset","sampleInputEditor","changeSampleInputEditor","jsonText","changeJSONText","newTimeToComplete","newSamplesInWindow","samplesInWindow","timeToCompleteSample","useTimeToCompleteSample","changeSampleTimeToComplete","shortcutHandlers","switch_to_label","switch_to_setup","switch_to_samples","allowChanges","handlers","EditableTitleText","newName","InterfacePage","some","annotationStartTime","newSamples","splice","LabelView","EditSampleDialog","newInput","errorBox","errors","err","changeLog","humanReadableChangeLog","userName","op","path","startsWith","sampleMatch","match","seamless","getIn","updateIn","addToArray","withoutIn","obj","parentPath","parentObj","Array","isArray","parseInt","object","patches","patch","from","isNaN","require","o","hash","charCodeAt","hashString","collab","serverUrl","getJSON","payload","opts","postJSON","patchJSON","sessionId","version","bent","initialContent","short_id","encodeURIComponent","res","udt_json","getLatestState","updateToLatestState","hashOfLatestState","latestVersion","humanReadableLog","getHumanReadableLog","newState","applySeamlessPatch","rfc6902","CUSTOM_COLLABORATION_SERVER","convertToCollaborativeFile","createSession","joinSession","AddSamplesKeys","k","sampleKeys","keys","flatten","forEach","sort","b","rows","toCSV","webReturn","saveFile","changeFile","saveAs","saveFileAsync","filePath","writeFile","endsWith","toUDTCSV","join","setFile","useFilesystem","ri","checkForLatestPatch","applyLatestPatches","sendPatchIfChanged","useServer","openFile","fsFile","handleLoadedFile","openUrl","decodeURIComponent","labelOnly","history","replaceState","search","makeSession","newFile","Buttons","errorDetails","detect","preventNavigation","confirmationMessage","event","returnValue","FileContext","useFileHandler","shouldPreventNavigation","usePreventNavigation","changeErrors","useErrors","setSelectedBrush","onCreateTemplate","openRecentItem","format","outputName","download","sessionName","onChangeSelectedBrush","isWelcomePage","AppErrorBoundary","DatasetEditor","StartingPage","onClickOpenSession","ErrorToasts","Loading","CircularProgress","App","fallback","Theme","LocalStorageApp","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f65bfaa9.chunk.js","sourcesContent":["import React from \"react\"\r\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\"\r\nimport { ThemeProvider } from \"@material-ui/core/styles\"\r\nimport \"./theme.css\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: colors.blue,\r\n    secondary: colors.blue,\r\n  },\r\n  typography: {\r\n    fontFamily: '\"Inter\", \"Roboto\", sans-serif',\r\n    button: {\r\n      textTransform: \"none\",\r\n    },\r\n  },\r\n})\r\n\r\nexport default ({ children }: any) => {\r\n  return <ThemeProvider theme={theme}>{children}</ThemeProvider>\r\n}\r\n","// @flow\r\n\r\nimport React from \"react\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\n\r\nconst WIDTH = 300\r\nconst borderColor = colors.grey[500]\r\nconst popupBoxBeforeAndAfter = {\r\n  bottom: \"100%\",\r\n  left: \"25%\",\r\n  border: \"solid transparent\",\r\n  content: '\" \"',\r\n  height: 0,\r\n  width: 0,\r\n  position: \"absolute\",\r\n  pointerEvents: \"none\",\r\n}\r\nconst PopupBox = styled(\"div\")({\r\n  position: \"absolute\",\r\n  zIndex: 10,\r\n  top: 45,\r\n  padding: 16,\r\n  boxSizing: \"border-box\",\r\n  borderRadius: 4,\r\n  left: -WIDTH / 4 + 22,\r\n  backgroundColor: \"#fff\",\r\n  border: `1px solid ${borderColor}`,\r\n  width: WIDTH,\r\n  minHeight: 200,\r\n  boxShadow: \"0px 3px 12px rgba(0,0,0,0.3)\",\r\n  \"&:before\": {\r\n    ...popupBoxBeforeAndAfter,\r\n    borderColor: \"rgba(0,0,0, 0)\",\r\n    borderBottomColor: borderColor,\r\n    borderWidth: 12,\r\n    marginLeft: -12,\r\n  },\r\n  \"&:after\": {\r\n    ...popupBoxBeforeAndAfter,\r\n    borderColor: \"rgba(255,255,255, 0)\",\r\n    borderBottomColor: \"#fff\",\r\n    borderWidth: 10,\r\n    marginLeft: -10,\r\n  },\r\n  \"& h1\": {\r\n    fontSize: 18,\r\n    marginTop: 0,\r\n    color: colors.blue[800],\r\n  },\r\n  \"& h2\": {\r\n    fontSize: 14,\r\n    color: colors.grey[800],\r\n  },\r\n  opacity: 1,\r\n  transition: \"opacity 200ms linear, transform 200ms ease\",\r\n  \"&.hidden\": {\r\n    opacity: 0,\r\n    transform: \"translate(0, 10px)\",\r\n    pointerEvents: \"none\",\r\n  },\r\n})\r\n\r\nexport default ({ open, children }) => {\r\n  return <PopupBox className={open ? \"\" : \"hidden\"}>{children}</PopupBox>\r\n}\r\n","// @flow\r\n\r\nimport React, { useState } from \"react\"\r\nimport IconButton from \"@material-ui/core/IconButton\"\r\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport HeaderPopupBox from \"../HeaderPopupBox\"\r\n\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst Container = styled(\"div\")({ position: \"relative\" })\r\n\r\nconst StyledButton = styled(Button)({\r\n  justifyContent: \"flex-start\",\r\n  \"& .fakeicon\": {\r\n    display: \"inline\",\r\n    marginRight: 8,\r\n    padding: 4,\r\n    paddingTop: 5,\r\n    fontSize: 11,\r\n    fontWeight: \"bold\",\r\n    color: \"#fff\",\r\n    backgroundColor: colors.grey[700],\r\n    borderRadius: 4,\r\n    width: 36,\r\n    \"&.blue\": {\r\n      backgroundColor: colors.blue[700],\r\n    },\r\n    \"&.green\": {\r\n      backgroundColor: colors.green[700],\r\n    },\r\n  },\r\n})\r\n\r\nexport default ({ onDownload }) => {\r\n  const [open, changeOpen] = useState(false)\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Container\r\n      onMouseEnter={() => changeOpen(true)}\r\n      onMouseLeave={() => changeOpen(false)}\r\n    >\r\n      <IconButton>\r\n        <DownloadIcon />\r\n      </IconButton>\r\n      <HeaderPopupBox open={open}>\r\n        <h1>{t(\"download\")}</h1>\r\n        <StyledButton fullWidth onClick={() => onDownload(\"csv\")}>\r\n          <div className=\"fakeicon green\">CSV</div>\r\n          {t(\"download\")} CSV\r\n        </StyledButton>\r\n        <StyledButton fullWidth onClick={() => onDownload(\"json\")}>\r\n          <div className=\"fakeicon blue\">JSON</div>\r\n          {t(\"download\")} JSON\r\n        </StyledButton>\r\n      </HeaderPopupBox>\r\n    </Container>\r\n  )\r\n}\r\n","// @flow weak\r\nimport React, { memo } from \"react\"\r\nimport AppBar from \"@material-ui/core/AppBar\"\r\nimport Toolbar from \"@material-ui/core/Toolbar\"\r\nimport Tabs from \"@material-ui/core/Tabs\"\r\nimport Tab from \"@material-ui/core/Tab\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport SettingsIcon from \"@material-ui/icons/Settings\"\r\nimport StorageIcon from \"@material-ui/icons/Storage\"\r\nimport BorderColorIcon from \"@material-ui/icons/BorderColor\"\r\nimport MenuIcon from \"@material-ui/icons/Menu\"\r\nimport IconButton from \"@material-ui/core/IconButton\"\r\nimport packageJSON from \"../../../package.json\"\r\nimport DownloadButton from \"../DownloadButton\"\r\n\r\n// const capitalize = (s) => {\r\n//   return s.charAt(0).toUpperCase() + s.slice(1)\r\n// }\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  headerButton: {\r\n    marginLeft: 16,\r\n  },\r\n  grow: { flexGrow: 1 },\r\n  list: {\r\n    width: 300,\r\n  },\r\n  tab: {\r\n    color: \"#000\",\r\n    \"& .icon\": {},\r\n  },\r\n  fullHeightTab: {\r\n    ...theme.mixins.toolbar,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      minWidth: 20,\r\n    },\r\n  },\r\n  tabWrapper: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    textTransform: \"none\",\r\n    color: \"#000\",\r\n    \"&&& svg\": {\r\n      marginBottom: 0,\r\n      marginRight: 8,\r\n      width: 18,\r\n      height: 18,\r\n    },\r\n  },\r\n}))\r\n\r\nconst getIcon = (t) => {\r\n  switch (t) {\r\n    case \"Setup\":\r\n      return <SettingsIcon className=\"icon\" />\r\n    case \"Label\":\r\n      return <BorderColorIcon className=\"icon\" />\r\n    case \"Samples\":\r\n      return <StorageIcon className=\"icon\" />\r\n    default:\r\n      return <div></div>\r\n  }\r\n}\r\n\r\nconst HeaderToolbar = ({\r\n  tabs,\r\n  currentTab,\r\n  onChangeTab,\r\n  additionalButtons,\r\n  onOpenDrawer,\r\n  title = \"Universal Data Tool\",\r\n  isDesktop,\r\n  fileOpen,\r\n  isSmall,\r\n  onDownload,\r\n \r\n}) => {\r\n  const c = useStyles()\r\n \r\n  return (\r\n    <AppBar color=\"default\" position=\"static\">\r\n      <Toolbar variant=\"dense\">\r\n        {!isDesktop && (\r\n          <IconButton onClick={onOpenDrawer} className={c.headerButton}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n        )}\r\n        {/* {fileOpen ? title : \"Universal Data Tool v\" + packageJSON.version} */}\r\n        {!isDesktop && fileOpen && <DownloadButton onDownload={onDownload} />}\r\n        <div className={c.grow} />\r\n        {additionalButtons}\r\n        {tabs.length > 0 && (\r\n          <Tabs\r\n            onChange={(e, newTab) => onChangeTab(newTab.toLowerCase())}\r\n            value={currentTab}\r\n          >\r\n            {tabs.map((t) => (\r\n              <Tab\r\n                key={t}\r\n                classes={{ root: c.fullHeightTab, wrapper: c.tabWrapper }}\r\n                className={c.tab}\r\n                icon={getIcon(t)}\r\n                label={isSmall ? \"\" : t}\r\n                value={t.toLowerCase()}\r\n              />\r\n            ))}\r\n          </Tabs>\r\n        )}\r\n      </Toolbar>\r\n    </AppBar>\r\n  )\r\n}\r\n\r\nexport default memo(HeaderToolbar)\r\n","// @flow\r\n\r\nimport ImageSearch from \"@material-ui/icons/ImageSearch\"\r\nimport Image from \"@material-ui/icons/Image\"\r\nimport CropFree from \"@material-ui/icons/CropFree\"\r\nimport TextFormat from \"@material-ui/icons/TextFormat\"\r\nimport Edit from \"@material-ui/icons/Edit\"\r\nimport Audiotrack from \"@material-ui/icons/Audiotrack\"\r\nimport Category from \"@material-ui/icons/Category\"\r\nimport ThreeDRotation from \"@material-ui/icons/ThreeDRotation\"\r\nimport OndemandVideoIcon from \"@material-ui/icons/OndemandVideo\"\r\nimport ContactSupport from \"@material-ui/icons/ContactSupport\"\r\n\r\nexport const templates = [\r\n  // {\r\n  //   name: \"Empty\",\r\n  //   Icon: CropFree,\r\n  //   dataset: {\r\n  //     interface: {},\r\n  //     samples: [],\r\n  //   },\r\n  // },\r\n  // {\r\n  //   name: \"Image Segmentation\",\r\n  //   Icon: ImageSearch,\r\n  //   dataset: {\r\n  //     interface: {\r\n  //       type: \"image_segmentation\",\r\n  //       labels: [\"valid\", \"invalid\"],\r\n  //       regionTypesAllowed: [\r\n  //         \"bounding-box\",\r\n  //         \"polygon\",\r\n  //         // \"full-segmentation\",\r\n  //         \"point\",\r\n  //         // \"pixel-mask\"\r\n  //       ],\r\n  //     },\r\n  //     samples: [\r\n  //       {\r\n  //         imageUrl:\r\n  //           \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\",\r\n  //       },\r\n  //       {\r\n  //         imageUrl:\r\n  //           \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\",\r\n  //       },\r\n  //     ],\r\n  //   },\r\n  // },\r\n  {\r\n    name: \"Image Classification\",\r\n    Icon: Image,\r\n    dataset: {\r\n      interface: {\r\n        type: \"image_classification\",\r\n        labels: [\"valid\", \"invalid\"],\r\n      },\r\n      samples: [\r\n        {\r\n          imageUrl:\r\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\",\r\n        },\r\n        {\r\n          imageUrl:\r\n            \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\",\r\n        },\r\n      ],\r\n    },\r\n  },\r\n  // {\r\n  //   name: \"Video Segmentation\",\r\n  //   Icon: OndemandVideoIcon,\r\n  //   dataset: {\r\n  //     interface: {\r\n  //       type: \"video_segmentation\",\r\n  //       labels: [\"valid\", \"invalid\"],\r\n  //       regionTypesAllowed: [\"bounding-box\", \"polygon\", \"point\"],\r\n  //     },\r\n  //     samples: [\r\n  //       {\r\n  //         videoUrl:\r\n  //           \"https://s3.amazonaws.com/asset.workaround.online/SampleVideo_1280x720_1mb.mp4\",\r\n  //       },\r\n  //     ],\r\n  //   },\r\n  // },\r\n  // {\r\n  //   name: \"Data Entry\",\r\n  //   Icon: Edit,\r\n  //   dataset: {\r\n  //     interface: {\r\n  //       type: \"data_entry\",\r\n  //       description: \"# Markdown description here\",\r\n  //       surveyjs: {\r\n  //         questions: [\r\n  //           {\r\n  //             type: \"text\",\r\n  //             name: \"document_title\",\r\n  //             title: \"Title of Document\",\r\n  //           },\r\n  //         ],\r\n  //       },\r\n  //     },\r\n  //     samples: [\r\n  //       {\r\n  //         pdfUrl: \"https://arxiv.org/pdf/1906.01969.pdf\",\r\n  //       },\r\n  //       {\r\n  //         pdfUrl: \"https://arxiv.org/pdf/1908.07069.pdf\",\r\n  //       },\r\n  //     ],\r\n  //   },\r\n  // },\r\n  // {\r\n  //   name: \"Named Entity Recognition\",\r\n  //   Icon: TextFormat,\r\n  //   dataset: {\r\n  //     interface: {\r\n  //       type: \"text_entity_recognition\",\r\n  //       overlapAllowed: false,\r\n  //       labels: [\r\n  //         {\r\n  //           id: \"food\",\r\n  //           displayName: \"Food\",\r\n  //           description: \"Edible item.\",\r\n  //         },\r\n  //         {\r\n  //           id: \"hat\",\r\n  //           displayName: \"Hat\",\r\n  //           description: \"Something worn on the head.\",\r\n  //         },\r\n  //       ],\r\n  //     },\r\n  //     samples: [\r\n  //       {\r\n  //         document:\r\n  //           \"This strainer makes a great hat, I'll wear it while I serve spaghetti!\",\r\n  //       },\r\n  //       {\r\n  //         document: \"Why are all these dumpings covered in butter?!\",\r\n  //       },\r\n  //     ],\r\n  //   },\r\n  // },\r\n  // {\r\n  //   name: \"Text Classification\",\r\n  //   Icon: ContactSupport,\r\n  //   dataset: {\r\n  //     interface: {\r\n  //       type: \"text_classification\",\r\n  //       labels: [\"positive_sentiment\", \"negative_sentiment\"],\r\n  //     },\r\n  //     samples: [\r\n  //       {\r\n  //         document: \"Wow this is terrible. I hated it.\",\r\n  //       },\r\n  //       {\r\n  //         document: \"This has made me so happy. I love this.\",\r\n  //       },\r\n  //       {\r\n  //         document:\r\n  //           \"At first I wasn't sure. Then I thought, oh it's not very good.\",\r\n  //       },\r\n  //     ],\r\n  //   },\r\n  // },\r\n  // {\r\n  //   name: \"Audio Transcription\",\r\n  //   Icon: Audiotrack,\r\n  //   dataset: {\r\n  //     interface: {\r\n  //       type: \"audio_transcription\",\r\n  //       description: \"# Markdown description here\",\r\n  //     },\r\n  //     samples: [\r\n  //       {\r\n  //         audioUrl: \"https://html5tutorial.info/media/vincent.mp3\",\r\n  //       },\r\n  //     ],\r\n  //   },\r\n  // },\r\n  // {\r\n  //   name: \"Composite\",\r\n  //   Icon: Category,\r\n  //   dataset: {\r\n  //     description: \"# Markdown description here\",\r\n  //     interface: {\r\n  //       type: \"composite\",\r\n  //       fields: [\r\n  //         {\r\n  //           fieldName: \"textInfo\",\r\n  //           interface: {\r\n  //             type: \"data_entry\",\r\n  //             surveyjs: {\r\n  //               questions: [\r\n  //                 {\r\n  //                   type: \"text\",\r\n  //                   name: \"group_letter\",\r\n  //                   title: \"Letter of Group\",\r\n  //                 },\r\n  //               ],\r\n  //             },\r\n  //           },\r\n  //         },\r\n  //         {\r\n  //           fieldName: \"segmentation\",\r\n  //           interface: {\r\n  //             type: \"image_segmentation\",\r\n  //             labels: [\"group text\"],\r\n  //             regionTypesAllowed: [\"bounding-box\"],\r\n  //           },\r\n  //         },\r\n  //       ],\r\n  //     },\r\n  //     samples: [\r\n  //       {\r\n  //         imageUrl:\r\n  //           \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image1.jpg\",\r\n  //       },\r\n  //       {\r\n  //         imageUrl:\r\n  //           \"https://s3.amazonaws.com/asset.workaround.online/example-jobs/sticky-notes/image2.jpg\",\r\n  //       },\r\n  //     ],\r\n  //   },\r\n  // },\r\n  // {\r\n  //   name: \"Pixel Segmentation\",\r\n  //   Icon: ImageSearch,\r\n  //   dataset: {\r\n  //     interface: {\r\n  //       type: \"image_pixel_segmentation\",\r\n  //       labels: [\"hair\", \"mouth\", \"nose\", \"eyes\"],\r\n  //       description: \"These are AI-generated faces, not real people.\",\r\n  //     },\r\n  //     samples: [\r\n  //       {\r\n  //         imageUrl:\r\n  //           \"https://s3.amazonaws.com/datasets.workaround.online/faces/010041.jpg\",\r\n  //       },\r\n  //       {\r\n  //         imageUrl:\r\n  //           \"https://s3.amazonaws.com/datasets.workaround.online/faces/010026.jpg\",\r\n  //       },\r\n  //       {\r\n  //         imageUrl:\r\n  //           \"https://s3.amazonaws.com/datasets.workaround.online/faces/010025.jpg\",\r\n  //       },\r\n  //     ],\r\n  //   },\r\n  // },\r\n  // {\r\n  //   name: \"3D Bounding Box\",\r\n  //   Icon: ThreeDRotation,\r\n  //   dataset: {\r\n  //     interface: {\r\n  //       type: \"3d_bounding_box\",\r\n  //       description: \"3D Bounding Box\",\r\n  //     },\r\n  //     samples: [{}],\r\n  //   },\r\n  // },\r\n]\r\n\r\nexport const templateMap = templates.reduce((acc, t) => {\r\n  acc[t.name] = t\r\n  acc[t.dataset.interface.type] = t\r\n  return acc\r\n}, {})\r\n\r\nexport default templates\r\n","//@flow weak\r\n\r\nimport React, { useCallback } from \"react\"\r\nimport Drawer from \"@material-ui/core/Drawer\"\r\n// import { useDropzone } from \"react-dropzone\"\r\nimport List from \"@material-ui/core/List\"\r\nimport ListItem from \"@material-ui/core/ListItem\"\r\nimport ListItemText from \"@material-ui/core/ListItemText\"\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\r\nimport ListSubheader from \"@material-ui/core/ListSubheader\"\r\nimport { GoMarkGithub } from \"react-icons/go\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport HomeIcon from \"@material-ui/icons/Home\"\r\n// import { FaTrashAlt } from \"react-icons/fa\"\r\nimport templates from \"../StartingPage/templates\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\n// import FileIcon from \"@material-ui/icons/InsertDriveFile\"\r\n// import NoteAddIcon from \"@material-ui/icons/NoteAdd\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst useStyles = makeStyles({})\r\n\r\nexport default ({\r\n  // recentItems,\r\n  // changeRecentItems,\r\n  onClickHome,\r\n  onCloseDrawer,\r\n  drawerOpen,\r\n  onOpenFile,\r\n  // onOpenRecentItem,\r\n  onClickTemplate,\r\n}) => {\r\n  const c = useStyles()\r\n  // const { t } = useTranslation()\r\n\r\n  // const onDrop = useCallback(\r\n  //   (acceptedFiles) => {\r\n  //     onOpenFile(acceptedFiles[0])\r\n  //   },\r\n  //   [onOpenFile]\r\n  // )\r\n\r\n  // function onDeleteFile(i) {\r\n  //   changeRecentItems(\r\n  //     recentItems.filter((oneRecentFile) => oneRecentFile.id !== i)\r\n  //   )\r\n  // }\r\n\r\n  // const { getRootProps, getInputProps } = useDropzone({ onDrop })\r\n\r\n  return (\r\n    <Drawer open={drawerOpen} onClose={onCloseDrawer}>\r\n      <List className={c.list}>\r\n        <ListItem onClick={onClickHome} button>\r\n          <ListItemIcon>\r\n            <HomeIcon />\r\n          </ListItemIcon>\r\n          <ListItemText>Home</ListItemText>\r\n        </ListItem>\r\n        {/* <ListItem {...getRootProps()} button>\r\n          <ListItemIcon>\r\n            <NoteAddIcon />\r\n          </ListItemIcon>\r\n          <ListItemText>Open File</ListItemText>\r\n          <input {...getInputProps()} />\r\n        </ListItem> */}\r\n        {/* <ListSubheader>Recent Files</ListSubheader>\r\n        {recentItems.length === 0 ? (\r\n          <ListItem>\r\n            <ListItemText\r\n              style={{ textAlign: \"center\", color: colors.grey[500] }}\r\n            >\r\n              {t(\"no-recent-items\")}\r\n            </ListItemText>\r\n          </ListItem>\r\n        ) : (\r\n          recentItems.map((ri, index) => (\r\n            <ListItem key={ri.fileName} button>\r\n              <ListItemIcon\r\n                onClick={() => {\r\n                  onOpenRecentItem(ri)\r\n                }}\r\n              >\r\n                <FileIcon />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                onClick={() => {\r\n                  onOpenRecentItem(ri)\r\n                }}\r\n              >\r\n                {ri.fileName}\r\n              </ListItemText>\r\n              <ListItemIcon\r\n                onClick={() => {\r\n                  onDeleteFile(ri.id)\r\n                }}\r\n              >\r\n                <FaTrashAlt />\r\n              </ListItemIcon>\r\n            </ListItem>\r\n          ))\r\n        )} */}\r\n        <ListSubheader>Create From Template</ListSubheader>\r\n        {templates.map((template) => (\r\n          <ListItem\r\n            button\r\n            key={template.name}\r\n            onClick={() => onClickTemplate(template)}\r\n          >\r\n            <ListItemIcon>\r\n              <template.Icon />\r\n            </ListItemIcon>\r\n            <ListItemText>{template.name}</ListItemText>\r\n          </ListItem>\r\n        ))}\r\n        \r\n        <ListItem\r\n          button\r\n          onClick={() => {\r\n            window.location.href =\r\n              \"/\"\r\n          }}\r\n        >\r\n          <ListItemIcon>\r\n            <GoMarkGithub />\r\n          </ListItemIcon>\r\n          <ListItemText>Github</ListItemText>\r\n        </ListItem>\r\n      </List>\r\n    </Drawer>\r\n  )\r\n}\r\n","// @flow weak\r\n\r\nimport React, { useState, createContext, useContext, useCallback } from \"react\"\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\"\r\n// import LoginDrawer from \"../LoginDrawer\"\r\n\r\nimport HeaderToolbar from \"../HeaderToolbar\"\r\nimport HeaderDrawer from \"../HeaderDrawer\"\r\n\r\nexport const HeaderContext = createContext({\r\n  recentItems: [],\r\n  changeRecentItems: () => null,\r\n  onClickTemplate: () => null,\r\n  onClickHome: () => null,\r\n  onOpenFile: () => null,\r\n  onOpenRecentItem: () => null,\r\n  isDesktop: false,\r\n  inSession: false,\r\n  onJoinSession: () => null,\r\n  onCreateSession: () => null,\r\n  onLeaveSession: () => null,\r\n  sessionBoxOpen: false,\r\n  changeSessionBoxOpen: () => null,\r\n  fileOpen: false,\r\n  onDownload: () => null,\r\n  authConfig: null,\r\n  onUserChange: () => null,\r\n  user: null,\r\n  logoutUser: () => null,\r\n})\r\n\r\nconst emptyArray = []\r\n\r\nexport default ({\r\n  additionalButtons = emptyArray,\r\n  title,\r\n  currentTab,\r\n  onChangeTab,\r\n  tabs = emptyArray,\r\n}) => {\r\n  const [drawerOpen, changeDrawerOpen] = useState(false)\r\n  // const [loginDrawerOpen, changeLoginDrawerOpen] = useState(false)\r\n  let headerContext = useContext(HeaderContext)\r\n  if (!headerContext.recentItems) headerContext.recentItems = []\r\n\r\n  const isSmall = useMediaQuery(\"(max-width: 800px)\")\r\n\r\n  const onOpenDrawer = useCallback(() => changeDrawerOpen(true), [])\r\n  const onCloseDrawer = useCallback(() => changeDrawerOpen(false), [])\r\n\r\n  return (\r\n    <>\r\n      <HeaderToolbar\r\n        tabs={tabs}\r\n        currentTab={currentTab}\r\n        onChangeTab={onChangeTab}\r\n        additionalButtons={additionalButtons}\r\n        onOpenDrawer={onOpenDrawer}\r\n        isSmall={isSmall}\r\n        {...headerContext}\r\n        // changeLoginDrawerOpen={changeLoginDrawerOpen}\r\n        title={title}\r\n      />\r\n      <HeaderDrawer\r\n        drawerOpen={drawerOpen}\r\n        onCloseDrawer={onCloseDrawer}\r\n        onClickHome={headerContext.onClickHome}\r\n        recentItems={headerContext.recentItems}\r\n        changeRecentItems={headerContext.changeRecentItems}\r\n        onOpenFile={headerContext.onOpenFile}\r\n        onClickTemplate={headerContext.onClickTemplate}\r\n        onOpenRecentItem={headerContext.onOpenRecentItem}\r\n      />\r\n      {/* <LoginDrawer\r\n        authConfig={headerContext.authConfig}\r\n        loginDrawerOpen={loginDrawerOpen}\r\n        onClose={() => changeLoginDrawerOpen(false)}\r\n        onUserChange={headerContext.onUserChange}\r\n        logoutUser={headerContext.logoutUser}\r\n      /> */}\r\n    </>\r\n  )\r\n}\r\n","// @flow\r\n\r\nimport React, { useState } from \"react\"\r\nimport Box from \"@material-ui/core/Box\"\r\nimport Dialog from \"@material-ui/core/Dialog\"\r\nimport DialogActions from \"@material-ui/core/DialogActions\"\r\nimport DialogContent from \"@material-ui/core/DialogContent\"\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\r\nimport CloseIcon from \"@material-ui/icons/Close\"\r\nimport FullScreenIcon from \"@material-ui/icons/Fullscreen\"\r\nimport FullScreenExitIcon from \"@material-ui/icons/FullscreenExit\"\r\nimport IconButton from \"@material-ui/core/IconButton\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport { grey, blue, red } from \"@material-ui/core/colors\"\r\nimport ReactMarkdown from \"react-markdown\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\n\r\nconst StyledDialogTitle = styled(DialogTitle)({\r\n  backgroundColor: grey[100],\r\n  borderBottom: `1px solid ${grey[300]}`,\r\n  paddingBottom: 12,\r\n  boxShadow: \"0px 2px 3px rgba(0,0,0,0.05)\",\r\n})\r\nconst StyledDialogContent = styled(DialogContent)({\r\n  paddingTop: 16,\r\n})\r\nconst StyledDialogActions = styled(DialogActions)({\r\n  backgroundColor: grey[100],\r\n  borderTop: `1px solid ${grey[300]}`,\r\n})\r\n\r\nexport default ({\r\n  open = false,\r\n  title,\r\n  children,\r\n  markdownContent,\r\n  onClose,\r\n  red: redOn,\r\n  noActionBar = false,\r\n  actions = [],\r\n}) => {\r\n  const [fullScreen, changeFullScreen] = useState(false)\r\n  return (\r\n    <Dialog open={open} onClose={onClose} fullScreen={fullScreen}>\r\n      <StyledDialogTitle>\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <span style={{ color: redOn ? red[700] : undefined }}>{title}</span>\r\n          <div style={{ flexGrow: 1 }} />\r\n          <IconButton onClick={() => changeFullScreen(!fullScreen)}>\r\n            {fullScreen ? <FullScreenExitIcon /> : <FullScreenIcon />}\r\n          </IconButton>\r\n          <IconButton onClick={onClose}>\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </Box>\r\n      </StyledDialogTitle>\r\n      <StyledDialogContent>\r\n        <Box maxWidth=\"90vw\" minWidth={400} lineHeight={1.5}>\r\n          {markdownContent ? (\r\n            <ReactMarkdown source={markdownContent} />\r\n          ) : (\r\n            children\r\n          )}\r\n        </Box>\r\n      </StyledDialogContent>\r\n      {!noActionBar && (\r\n        <StyledDialogActions>\r\n          <Button onClick={() => onClose()}>\r\n            <span style={{ color: grey[700], fontWeight: 500 }}>Close</span>\r\n          </Button>\r\n          {actions.map((action, i) => (\r\n            <Button disabled={action.disabled} key={i} onClick={action.onClick}>\r\n              <span\r\n                style={{ color: redOn ? red[700] : blue[700], fontWeight: 500 }}\r\n              >\r\n                {action.text}\r\n              </span>\r\n            </Button>\r\n          ))}\r\n        </StyledDialogActions>\r\n      )}\r\n    </Dialog>\r\n  )\r\n}\r\n","// @flow\r\n\r\nimport React from \"react\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport templates from \"../StartingPage/templates\"\r\nimport SimpleDialog from \"../SimpleDialog\"\r\n\r\nconst useStyles = makeStyles({\r\n  bigButton: {\r\n    padding: 10,\r\n    width: 150,\r\n    height: 120,\r\n    border: \"1px solid #ccc\",\r\n    margin: 10,\r\n  },\r\n  bigIcon: {\r\n    width: 48,\r\n    height: 48,\r\n  },\r\n})\r\n\r\nexport default ({ open, onClose, onSelect }) => {\r\n  const c = useStyles()\r\n  return (\r\n    <SimpleDialog title=\"Create from Template\" open={open} onClose={onClose}>\r\n      {templates.map((template) => (\r\n        <Button\r\n          key={template.name}\r\n          onClick={() => onSelect(template)}\r\n          className={c.bigButton}\r\n        >\r\n          <div>\r\n            <div>{template.name}</div>\r\n            <div>\r\n              <template.Icon className={c.bigIcon} />\r\n            </div>\r\n          </div>\r\n        </Button>\r\n      ))}\r\n    </SimpleDialog>\r\n  )\r\n}\r\n","import posthog from \"posthog-js\"\r\n\r\n\r\nwindow.posthogInitialized = false\r\nexport default () => {\r\n \r\n  if (!window.posthogInitialized) {\r\n    posthog.init(\"dSrx1PbFd02XsxlLd7qNbeTxKZwwao2sclVmapyYlT4\", {\r\n      api_host: \"https://posthog.universaldatatool.com\",\r\n      autocapture: false,\r\n    })\r\n    window.posthog = posthog\r\n    const domain = window.location.origin\r\n    posthog.capture(\"domain\", { domain })\r\n   \r\n    posthog.people.set({domain })\r\n    window.posthogInitialized = true\r\n  }\r\n  return posthog\r\n}\r\n","import JAC from \"jac-format\"\r\n\r\nconst alternativeSpellings = {\r\n  imageUrl: [\r\n    \"image_url\",\r\n    \"image_urls\",\r\n    \"image\",\r\n    \"image_src\",\r\n    \"img_url\",\r\n    \"img\",\r\n    \"img_src\",\r\n  ],\r\n  document: [\"text\"],\r\n}\r\nconst badSpellingMap = {}\r\nfor (const [correct, badSpellings] of Object.entries(alternativeSpellings)) {\r\n  for (const badSpelling of badSpellings) {\r\n    badSpellingMap[badSpelling] = correct\r\n  }\r\n}\r\n\r\nconst convertTaskDatumMistakes = (sample) => {\r\n  for (const key in sample) {\r\n    const normalizedKey = key.toLowerCase().replace(/ /g, \"_\")\r\n    const correction = badSpellingMap[normalizedKey]\r\n    if (correction) {\r\n      sample[correction] = sample[key]\r\n      delete sample[key]\r\n    }\r\n  }\r\n  return sample\r\n}\r\n\r\nexport default (csv) => {\r\n  const json = JAC.fromCSV(csv, { derivePath: () => \"samples.*\" })\r\n  if (!json.samples) throw new Error(\"No samples\")\r\n  return {\r\n    interface: json.interface,\r\n    taskOutput: json.samples.map((sample) => sample.output),\r\n    samples: json.samples.map(convertTaskDatumMistakes).map((sample) => {\r\n      delete sample.output\r\n      return sample\r\n    }),\r\n  }\r\n}\r\n","// @flow\r\n\r\nimport React, { useState, useEffect } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport Grid from \"@material-ui/core/Grid\"\r\nimport Header from \"../Header\"\r\n// import Button from \"@material-ui/core/Button\"\r\n// import templates from \"./templates\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\n// import { useDropzone } from \"react-dropzone\"\r\nimport CreateFromTemplateDialog from \"../CreateFromTemplateDialog\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport usePosthog from \"../../utils/use-posthog\"\r\n// import packageInfo from \"../../../package.json\"\r\n// import useEventCallback from \"use-event-callback\"\r\nimport DownloadIcon from \"@material-ui/icons/GetApp\"\r\n// import Box from \"@material-ui/core/Box\"\r\n// import Select from \"react-select\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    backgroundColor: colors.grey[900],\r\n    height: \"100vh\",\r\n  },\r\n  headerButton: {\r\n    fontSize: 12,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  downloadIcon: {\r\n    marginTop: 2,\r\n    width: 18,\r\n    height: 18,\r\n    marginRight: 4,\r\n    marginLeft: -6,\r\n    color: colors.grey[700],\r\n  },\r\n  languageSelectionWrapper: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    textAlign: \"center\",\r\n  },\r\n})\r\n\r\nconst ContentContainer = styled(\"div\")(({ theme }) => ({\r\n  display: \"flex\",\r\n  justifyContent: \"center\",\r\n  flexGrow: 1,\r\n  color: \"#fff\",\r\n  overflowY: \"scroll\",\r\n  padding: 100,\r\n  [theme.breakpoints.down(\"sm\")]: {\r\n    padding: 50,\r\n  },\r\n}))\r\nconst Content = styled(\"div\")(({ theme }) => ({\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  width: \"calc(100% - 32px)\",\r\n  marginLeft: 16,\r\n  maxWidth: 1000,\r\n}))\r\n\r\nconst Title = styled(\"div\")({\r\n  marginTop: 20,\r\n  fontSize: 36,\r\n  fontWeight: 600,\r\n  color: colors.grey[300],\r\n})\r\n\r\n// const languageSelectionFormStyle = {\r\n//   control: (base, state) => ({\r\n//     ...base,\r\n//     border: \"1px solid #9e9e9e\",\r\n//     background: \"transparent\",\r\n//     color: \"#e0e0e0\",\r\n//   }),\r\n//   menuList: (base) => ({\r\n//     ...base,\r\n//     padding: 0,\r\n//     margin: 0,\r\n//     color: \"black\",\r\n//   }),\r\n//   singleValue: (base) => ({\r\n//     ...base,\r\n//     color: \"white\",\r\n//   }),\r\n// }\r\n\r\nconst Subtitle = styled(\"div\")({\r\n  fontSize: 18,\r\n  // fontWeight: \"bold\",\r\n  marginTop: 8,\r\n  color: colors.grey[500],\r\n})\r\nconst ActionList = styled(\"div\")({ marginTop: 48 })\r\nconst Action = styled(\"a\")({\r\n  display: \"block\",\r\n  color: colors.blue[500],\r\n  marginTop: 4,\r\n  cursor: \"pointer\",\r\n  textDecoration: \"none\",\r\n})\r\nconst ActionTitle = styled(\"div\")({\r\n  // fontWeight: \"bold\",\r\n  fontSize: 24,\r\n  marginBottom: 8,\r\n  color: colors.grey[500],\r\n})\r\n// const ActionText = styled(\"div\")({\r\n//   color: colors.grey[300],\r\n//   \"& a\": {\r\n//     cursor: \"pointer\",\r\n//     color: colors.blue[500],\r\n//     textDecoration: \"none\",\r\n//   },\r\n// })\r\n// const Actionless = styled(\"div\")({\r\n//   color: colors.grey[600],\r\n//   paddingTop: 16,\r\n// })\r\n\r\nconst BottomSpacer = styled(\"div\")({ height: 100 })\r\n\r\n// const languageOptions = [\r\n//   { label: \"English\", value: \"en\" },\r\n//   { label: \"French\", value: \"fr\" },\r\n//   { label: \"Chinese\", value: \"cn\" },\r\n// ]\r\n\r\nexport default ({\r\n  // onFileDrop,\r\n  onOpenTemplate,\r\n  // showDownloadLink = true,\r\n  // recentItems = [],\r\n  // onOpenRecentItem,\r\n  // onClickOpenSession,\r\n}) => {\r\n  const c = useStyles()\r\n  const posthog = usePosthog()\r\n\r\n  // internalization hook\r\n  const { t, i18n } = useTranslation()\r\n\r\n  //const isDesktop = useIsDesktop()\r\n  // const [newVersionAvailable, changeNewVersionAvailable] = useState(false)\r\n  // useEffect(() => {\r\n  //   // if (!isDesktop) return\r\n  //   async function checkNewVersion() {\r\n  //     const newPackage = await fetch(\r\n  //       \"https://raw.githubusercontent.com/UniversalDataTool/universal-data-tool/master/package.json\"\r\n  //     ).then((r) => r.json())\r\n  //     if (newPackage.version !== packageInfo.version) {\r\n  //       changeNewVersionAvailable(newPackage.version)\r\n  //     }\r\n  //   }\r\n  //   checkNewVersion()\r\n  // }, [])\r\n\r\n  const [\r\n    createFromTemplateDialogOpen,\r\n    changeCreateFromTemplateDialogOpen,\r\n  ] = useState(false)\r\n  // const [addAuthFromDialogOpen, changeAddAuthFromDialogOpen] = useState(false)\r\n  // const onDrop = useEventCallback((acceptedFiles) => {\r\n  //   onFileDrop(acceptedFiles[0])\r\n  // })\r\n\r\n  // const changeLanguage = (language) => {\r\n  //   i18n.changeLanguage(language)\r\n  // }\r\n\r\n  // let { getRootProps, getInputProps } = useDropzone({ onDrop })\r\n\r\n  return (\r\n    <div className={c.container}>\r\n      <CreateFromTemplateDialog\r\n        open={createFromTemplateDialogOpen}\r\n        onSelect={(template) => {\r\n          posthog.capture(\"template_clicked\", {\r\n            clicked_template: template.name,\r\n          })\r\n          onOpenTemplate(template)\r\n        }}\r\n        onClose={() => changeCreateFromTemplateDialogOpen(false)}\r\n      />\r\n      <Header\r\n        // additionalButtons={[\r\n        //   newVersionAvailable && (\r\n        //     <Button\r\n        //       variant=\"outlined\"\r\n        //       key=\"download-latest\"\r\n        //       className={c.headerButton}\r\n        //       href=\"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\r\n        //     >\r\n        //       <DownloadIcon className={c.downloadIcon} />\r\n        //       {t(\"Download Version\")} v{newVersionAvailable}\r\n        //     </Button>\r\n        //   ),\r\n          // !newVersionAvailable && showDownloadLink && (\r\n          //   <Button\r\n          //     variant=\"outlined\"\r\n          //     key=\"download\"\r\n          //     href=\"https://github.com/OpenHumanAnnotation/universal-data-tool/releases\"\r\n          //     className={c.headerButton}\r\n          //   >\r\n          //     <DownloadIcon className={c.downloadIcon} />\r\n          //     {t(\"download\")}\r\n          //   </Button>\r\n          // ),\r\n        // ].filter(Boolean)}\r\n      />\r\n      <ContentContainer>\r\n        <Content>\r\n          <Grid container>\r\n            <Grid xs={6} item>\r\n              <Title>Universal Data Tool</Title>\r\n              <Subtitle>{t(\"universaldatatool-description\")}</Subtitle>\r\n            </Grid>\r\n            <Grid xs={3} />\r\n            {/* <Grid xs={3}>\r\n              <Box padding={3} className={c.languageSelectionWrapper}>\r\n                <ActionTitle>Select Language</ActionTitle>\r\n                <Select\r\n                  styles={languageSelectionFormStyle}\r\n                  defaultValue={languageOptions[0]}\r\n                  options={languageOptions}\r\n                  onChange={({ value }) => changeLanguage(value)}\r\n                />\r\n              </Box>\r\n            </Grid> */}\r\n            <Grid xs={6} item>\r\n              <ActionList>\r\n                <ActionTitle>Start</ActionTitle>\r\n                {/* <Action\r\n                //   onClick={() => {\r\n                //     posthog.capture(\"template_clicked\", {\r\n                //       clicked_template: \"empty\",\r\n                //     })\r\n                //     onOpenTemplate(templates.find((t) => t.name === \"Empty\"))\r\n                //   }}\r\n                // >\r\n                //   {t(\"new-file\")}\r\n                </Action> */}\r\n                <Action\r\n                  onClick={() => changeCreateFromTemplateDialogOpen(true)}\r\n                >\r\n                  {t(\"start-from-template\")}\r\n                </Action>\r\n                {/* <Action {...getRootProps()}>\r\n                  <input {...getInputProps()} />\r\n                  {t(\"open-file\")}\r\n                </Action>\r\n                {onClickOpenSession && (\r\n                  <Action onClick={onClickOpenSession}>\r\n                    {t(\"open-collabrative-session\")}\r\n                  </Action>\r\n                )}\r\n                <Action onClick={() => changeAddAuthFromDialogOpen(true)}>\r\n                  {t(\"add-authentication\")}\r\n                </Action> */}\r\n                {/* <Action>Open Folder</Action> */}\r\n              </ActionList>\r\n              {/* <ActionList>\r\n                <ActionTitle>Recent</ActionTitle>\r\n                {recentItems.length === 0 ? (\r\n                  <Actionless>{t(\"no-recent-files\")}</Actionless>\r\n                ) : (\r\n                  recentItems.map((ri, i) => (\r\n                    <Action key={i} onClick={() => onOpenRecentItem(ri)}>\r\n                      {ri.fileName}\r\n                    </Action>\r\n                  ))\r\n                )}\r\n              </ActionList> */}\r\n              {/* <ActionList>\r\n                <ActionTitle>Help</ActionTitle>\r\n                <Action href=\"https://github.com/UniversalDataTool/universal-data-tool/releases\">\r\n                  {t(\"downloading-and-installing-udt\")}\r\n                </Action>\r\n                <Action href=\"https://dev.to/seveibar/make-bounding-boxes-for-artificial-intelligence-with-udt-1kai\">\r\n                  {t(\"labeling-images\")}\r\n                </Action>\r\n                {/* <Action>Custom Data Entry</Action> */}\r\n                {/* <Action href=\"https://github.com/UniversalDataTool/universal-data-tool\">\r\n                  Github {t(\"repository\").toUpperCase()}\r\n                </Action> */}\r\n                {/* <Action href=\"#\">\r\n                  How to Collaborate in Real-Time with UDT\r\n                </Action> */}\r\n              {/* </ActionList> */} \r\n            </Grid>\r\n            <Grid xs={6} item>\r\n              {/* <ActionList>\r\n                <ActionTitle>About</ActionTitle>\r\n                <ActionText>\r\n                  {t(\"start-page-about-first-paragraph\")}\r\n                  <br />\r\n                  <br />\r\n                  {t(\"start-page-about-second-paragraph\")}\r\n                  <br />\r\n                  <br />\r\n                  {t(\"the-udt-uses-an\")}{\" \"}\r\n                  <a href=\"https://github.com/UniversalDataTool/udt-format\">\r\n                    open-source data format (.udt.json / .udt.csv)\r\n                  </a>{\" \"}\r\n                  {t(\"start-page-about-third-paragraph\")}\r\n                  <br />\r\n                  <br />\r\n                </ActionText>\r\n              </ActionList> */}\r\n              {/* <ActionList>\r\n                <ActionTitle>Instant Try Now</ActionTitle>\r\n                <ActionText>\r\n                  <Action\r\n                    style={{ display: \"inline\" }}\r\n                    onClick={() => changeCreateFromTemplateDialogOpen(true)}\r\n                  >\r\n                    {t(\"open-a-template\")}\r\n                  </Action>{\" \"}\r\n                  {t(\"to-see-how-the-udt-could-work-for-your-data\")}\r\n                </ActionText>\r\n              </ActionList> */}\r\n            </Grid>\r\n            <Grid xs={12} item>\r\n              <BottomSpacer />\r\n            </Grid>\r\n          </Grid>\r\n        </Content>\r\n      </ContentContainer>\r\n    </div>\r\n  )\r\n}\r\n","// @flow\r\nimport React, { useState, useEffect } from \"react\"\r\nimport TextField from \"@material-ui/core/TextField\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport isEmpty from \"lodash/isEmpty\"\r\n\r\nconst useStyles = makeStyles({\r\n  textField: {\r\n    marginLeft: 8,\r\n  },\r\n})\r\n\r\nconst SAVE_WAIT = 2000\r\n\r\nexport default ({ value, onChange }) => {\r\n  const c = useStyles()\r\n  const [{ editing, newValue }, changeEditing] = useState({\r\n    editing: false,\r\n    newValue: value || \"\",\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (!isEmpty(newValue) && newValue !== \"unnamed\") {\r\n      changeEditing({ editing, newValue: newValue })\r\n    } else {\r\n      changeEditing({ editing, newValue: value })\r\n    }\r\n  }, [newValue, editing, value])\r\n\r\n  useEffect(() => {\r\n    if (!editing) return\r\n    let listener = (e) => {\r\n      if (e.key === \"Enter\") {\r\n        onChange(newValue)\r\n        changeEditing({ editing: false })\r\n      }\r\n    }\r\n    window.addEventListener(\"keydown\", listener)\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", listener)\r\n    }\r\n  }, [editing, newValue, onChange])\r\n\r\n  useEffect(() => {\r\n    if (!newValue) return\r\n    if (editing) {\r\n      let timeout = setTimeout(\r\n        () => {\r\n          onChange(newValue)\r\n          changeEditing({ editing: false })\r\n        },\r\n        value === newValue ? SAVE_WAIT * 5 : SAVE_WAIT\r\n      )\r\n\r\n      return () => clearTimeout(timeout)\r\n    } else {\r\n      return () => {}\r\n    }\r\n  }, [editing, newValue, value, onChange])\r\n\r\n  return (\r\n    <TextField\r\n      className={c.textField}\r\n      label=\"File Name\"\r\n      variant=\"outlined\"\r\n      size=\"small\"\r\n      InputProps={{\r\n        inputProps: { style: { color: \"#000\" } },\r\n      }}\r\n      onKeyDown={(e) => {\r\n        if (e.key === \"Enter\") {\r\n          e.preventDefault()\r\n          e.stopPropagation()\r\n          e.target.blur()\r\n        }\r\n      }}\r\n      onKeyPress={(e) => {\r\n        e.stopPropagation()\r\n      }}\r\n      onChange={(e) => {\r\n        changeEditing({\r\n          editing: true,\r\n          newValue: e.target.value,\r\n        })\r\n      }}\r\n      value={newValue || \"\"}\r\n    />\r\n  )\r\n}\r\n","// @flow weak\r\n\r\nimport seed from \"seed-random\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\n\r\nconst fadedGrey = {\r\n  ...colors.grey,\r\n  // \"800\": colors.grey[600],\r\n  // \"700\": colors.grey[500],\r\n  // \"600\": colors.grey[400],\r\n  // \"500\": colors.grey[300],\r\n  // \"400\": colors.grey[200],\r\n  // \"300\": colors.grey[100],\r\n  isFaded: true,\r\n}\r\n\r\nconst availableColors = [\r\n  colors.blue,\r\n  colors.deepOrange,\r\n  colors.green,\r\n  colors.purple,\r\n  colors.pink,\r\n  colors.cyan,\r\n  colors.orange,\r\n  colors.indigo,\r\n]\r\n\r\nconst colorMap = {\r\n  ...colors,\r\n  complete: colors.blue,\r\n  incomplete: fadedGrey,\r\n  faded: fadedGrey,\r\n  review: colors.deepOrange,\r\n}\r\n\r\nexport default (brush) => {\r\n  return (\r\n    colorMap[brush] || availableColors[seed(brush) * availableColors.length]\r\n  )\r\n}","// @flow weak\r\n\r\nimport React, { memo, useCallback, useReducer, useEffect } from \"react\"\r\nimport useEventCallback from \"use-event-callback\"\r\nimport { useLocalStorage } from \"react-use\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport range from \"lodash/range\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\nimport classNames from \"classnames\"\r\nimport TablePagination from \"@material-ui/core/TablePagination\"\r\nimport Box from \"@material-ui/core/Box\"\r\nimport getBrushColorPalette from \"../../utils/get-brush-color-palette\"\r\n\r\nconst Container = styled(\"div\")({\r\n  flexWrap: \"wrap\",\r\n  height: \"100%\",\r\n  boxSizing: \"border-box\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n})\r\nconst EmptyState = styled(\"div\")({\r\n  fontSize: 24,\r\n  color: colors.grey[500],\r\n  padding: 30,\r\n  textAlign: \"center\",\r\n})\r\nconst SampleDiv = styled(\"div\")(({ color }) => ({\r\n  color: \"#fff\",\r\n  fontVariantNumeric: \"tabular-nums\",\r\n  margin: 4,\r\n  padding: 4,\r\n  backgroundColor: color[500],\r\n  display: \"inline-flex\",\r\n  fontSize: 14,\r\n  fontWeight: 500,\r\n  textAlign: \"center\",\r\n  justifyContent: \"center\",\r\n  minWidth: \"3em\",\r\n  borderRadius: 3,\r\n  cursor: \"pointer\",\r\n  userSelect: \"none\",\r\n  transition:\r\n    \"box-shadow 200ms ease, transform 200ms ease, background-color 200ms ease\",\r\n  \"&:hover\": {\r\n    backgroundColor: color[700],\r\n  },\r\n  // color: color.isFaded ? \"#000\" : \"#fff\",\r\n  \"&.selected\": {\r\n    backgroundColor: color[700],\r\n    boxShadow: `0px 0px 2px 1px ${color[\"A200\"]}`,\r\n    transform: \"scale(1.05,1.05)\",\r\n  },\r\n}))\r\n\r\nconst Sample = memo(\r\n  ({\r\n    index,\r\n    onClick,\r\n    completed,\r\n    selected,\r\n    onMouseDown,\r\n    onMouseUp,\r\n    onMouseEnter,\r\n    brush,\r\n  }) => {\r\n    return (\r\n      <SampleDiv\r\n        className={classNames({ completed, selected })}\r\n        onClick={() => onClick(index)}\r\n        onMouseDown={() => onMouseDown(index)}\r\n        onMouseUp={() => onMouseUp(index)}\r\n        onMouseEnter={() => onMouseEnter(index)}\r\n        color={getBrushColorPalette(brush)}\r\n      >\r\n        {index}\r\n      </SampleDiv>\r\n    )\r\n  },\r\n  function (p, n) {\r\n    return (\r\n      p.index === n.index &&\r\n      p.completed === n.completed &&\r\n      p.selected === n.selected &&\r\n      p.brush === n.brush\r\n    )\r\n  }\r\n)\r\n\r\nexport default ({ count, completed = [], samples, onClick }) => {\r\n  const [samplesPerPage, changeSamplesPerPage] = useLocalStorage(\r\n    \"samplesPerPage\",\r\n    100\r\n  )\r\n  const [sampleOffset, changeSampleOffset] = useLocalStorage(\"sampleOffset\", 0)\r\n\r\n  useEffect(() => {\r\n    if (sampleOffset > count) {\r\n      changeSampleOffset(0)\r\n    }\r\n  }, [changeSampleOffset, sampleOffset, count])\r\n\r\n  const [selectRange, changeSelectRange] = useReducer((state, newValue) => {\r\n    if (newValue === null) return null\r\n    if (typeof newValue === \"number\") {\r\n      if (!state) return null\r\n      return [Math.min(newValue, state[0]), Math.max(newValue + 1, state[1])]\r\n    }\r\n    return newValue\r\n  }, null)\r\n\r\n  const startSelectRange = useCallback(\r\n    (index) => changeSelectRange([index, index + 1]),\r\n    [changeSelectRange]\r\n  )\r\n  const moveSelectRange = useCallback((index) => changeSelectRange(index), [\r\n    changeSelectRange,\r\n  ])\r\n  const endSelectRange = useCallback(() => {}, [])\r\n  const checkAndNullifySelectRange = useCallback(\r\n    (e) => {\r\n      if (e.buttons !== 1) {\r\n        changeSelectRange(null)\r\n      }\r\n    },\r\n    [changeSelectRange]\r\n  )\r\n  const onClickMemo = useEventCallback(onClick)\r\n\r\n  return (\r\n    <Container\r\n      onMouseUp={checkAndNullifySelectRange}\r\n      onMouseEnter={checkAndNullifySelectRange}\r\n    >\r\n      {count === 0 && (\r\n        <EmptyState>\r\n          No samples, try using \"Import Toy Dataset\" in Samples > Import\r\n        </EmptyState>\r\n      )}\r\n      <Box flexGrow={1}>\r\n        {range(\r\n          sampleOffset,\r\n          Math.min(count, sampleOffset + samplesPerPage)\r\n        ).map((i) => (\r\n          <Sample\r\n            onClick={onClickMemo}\r\n            key={i}\r\n            index={i}\r\n            completed={completed[i]}\r\n            brush={completed[i] ? samples[i].brush || \"complete\" : \"incomplete\"}\r\n            selected={selectRange && i >= selectRange[0] && i < selectRange[1]}\r\n            onMouseDown={startSelectRange}\r\n            onMouseEnter={moveSelectRange}\r\n            onMouseUp={endSelectRange}\r\n          />\r\n        ))}\r\n      </Box>\r\n      <TablePagination\r\n        rowsPerPageOptions={[100, 250, 500, 1000, 2000, 10000]}\r\n        component=\"div\"\r\n        count={count}\r\n        rowsPerPage={samplesPerPage}\r\n        page={Math.floor(sampleOffset / samplesPerPage)}\r\n        labelRowsPerPage=\"Samples per Page:\"\r\n        onChangePage={(e, newPage) =>\r\n          changeSampleOffset(newPage * samplesPerPage)\r\n        }\r\n        onChangeRowsPerPage={(e) => changeSamplesPerPage(+e.target.value)}\r\n      />\r\n    </Container>\r\n  )\r\n}\r\n","// @flow weak\r\nimport React, { useState } from \"react\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport SimpleDialog from \"../SimpleDialog\"\r\nimport Select from \"react-select\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\n\r\nconst SelectContainer = styled(\"div\")({\r\n  marginTop: 8,\r\n  marginBottom: 16,\r\n})\r\nconst TextArea = styled(\"textarea\")({\r\n  width: \"100%\",\r\n  minHeight: 300,\r\n})\r\nconst ErrorText = styled(\"div\")({\r\n  color: colors.red[600],\r\n  padding: 16,\r\n})\r\n\r\nconst autoDetectOptions = [\r\n  {\r\n    label: \"Auto Detect File Type\",\r\n    value: \"auto_detect\",\r\n  },\r\n  {\r\n    label: \"Image URLs\",\r\n    value: \"images\",\r\n  },\r\n]\r\n\r\nexport default ({ open, onClose, onAddSamples }) => {\r\n  const [content, changeContent] = useState(\"\")\r\n  const [urlType, changeURLType] = useState(\"auto_detect\")\r\n  const [error, setError] = useState(\"\")\r\n  return (\r\n    <SimpleDialog\r\n      title=\"Paste Urls\"\r\n      open={open}\r\n      onClose={onClose}\r\n      actions={[\r\n        {\r\n          text: \"Add Samples\",\r\n          onClick: () => {\r\n            try {\r\n              onAddSamples(\r\n                content\r\n                  .split(\"\\n\")\r\n                  .map((l) => l.trim())\r\n                  .filter(Boolean)\r\n                  .map((s) => {\r\n                    if (urlType === \"images\") {\r\n                      return { imageUrl: s }\r\n                    }\r\n                    let extension = s\r\n                      .replace(/\\?.*/g, \"\")\r\n                      .split(\".\")\r\n                      .slice(-1)[0]\r\n                    if (s.includes(\"gstatic.com/images\")) {\r\n                      extension = \"jpg\"\r\n                    }\r\n                    switch (extension.toLowerCase()) {\r\n                      case \"png\":\r\n                      case \"jpg\":\r\n                      case \"gif\":\r\n                      case \"jpeg\":\r\n                      case \"bmp\": {\r\n                        return { imageUrl: s }\r\n                      }\r\n                      case \"pdf\": {\r\n                        return { pdfUrl: s }\r\n                      }\r\n                      case \"mp3\":\r\n                      case \"wav\": {\r\n                        return { audioUrl: s }\r\n                      }\r\n                      default: {\r\n                        throw new Error(\r\n                          `extension not recognized: \"${extension}\" in \"${s}\"`\r\n                        )\r\n                        // TODO if the user doesn't care, return null (this\r\n                        // behavior could be enabled with textfield option)\r\n                      }\r\n                    }\r\n                  })\r\n                  .filter(Boolean)\r\n              )\r\n            } catch (e) {\r\n              setError(e.toString())\r\n            }\r\n          },\r\n        },\r\n      ]}\r\n    >\r\n      <SelectContainer>\r\n        <Select\r\n          options={autoDetectOptions}\r\n          defaultValue={autoDetectOptions[0]}\r\n          onChange={(opt) => {\r\n            changeURLType(opt.value)\r\n          }}\r\n        />\r\n      </SelectContainer>\r\n      {error && <ErrorText>{error}</ErrorText>}\r\n      <TextArea\r\n        onChange={(e, v) => changeContent(e.target.value)}\r\n        placeholder={\"Paste URLs here\\nOne URL per line\"}\r\n      />\r\n    </SimpleDialog>\r\n  )\r\n}\r\n","// @flow weak\r\n\r\nimport React, { useState } from \"react\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport useEventCallback from \"use-event-callback\"\r\nimport { useDropzone } from \"react-dropzone\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\n\r\nconst TextArea = styled(\"textarea\")({\r\n  width: \"100%\",\r\n  minHeight: 300,\r\n})\r\n\r\nconst UploadHover = styled(\"div\")({\r\n  fontSize: 24,\r\n  color: colors.grey[600],\r\n  textAlign: \"center\",\r\n  padding: 48,\r\n})\r\n\r\nconst emptyFunc = () => null\r\n\r\nexport default ({ content, onChangeContent, placeholder }) => {\r\n  const onDrop = useEventCallback((acceptedFiles) => {\r\n    const reader = new FileReader()\r\n    reader.onload = (e) => {\r\n      const fileContent = e.target.result\r\n      onChangeContent(fileContent)\r\n    }\r\n    reader.readAsText(acceptedFiles[0])\r\n  })\r\n\r\n  const [lastClickTime, changeLastClickTime] = useState(0)\r\n  const onClick = useEventCallback((e) => {\r\n    if (Date.now() - lastClickTime < 400) {\r\n      getRootProps().onClick(e)\r\n    }\r\n    changeLastClickTime(Date.now())\r\n  })\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop })\r\n\r\n  return (\r\n    <div {...getRootProps()} onClick={emptyFunc}>\r\n      <input {...getInputProps()} />\r\n      {isDragActive ? (\r\n        <UploadHover>Drop the text or csv file here.</UploadHover>\r\n      ) : (\r\n        <TextArea\r\n          value={content}\r\n          onChange={(e, v) => onChangeContent(e.target.value)}\r\n          onClick={onClick}\r\n          placeholder={placeholder}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","// @flow weak\r\n\r\nimport React, { useState } from \"react\"\r\nimport SimpleDialog from \"../SimpleDialog\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport TextAreaWithUpload from \"../TextAreaWithUpload\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\nimport fromUDTCSV from \"../../utils/from-udt-csv.js\"\r\n\r\nconst InfoText = styled(\"div\")({\r\n  fontFamily: \"Inter\",\r\n  marginBottom: 20,\r\n  \"& a\": {\r\n    color: colors.blue[500],\r\n  },\r\n})\r\n\r\nconst Error = styled(\"div\")({\r\n  color: colors.red[500],\r\n  whiteSpace: \"pre-wrap\",\r\n  marginBottom: 20,\r\n})\r\n\r\nconst ImportUDTFileDialog = ({ open, onClose, onAddSamples }) => {\r\n  const [error, changeError] = useState(null)\r\n  const [content, setContent] = useState(\"\")\r\n\r\n  return (\r\n    <SimpleDialog\r\n      open={open}\r\n      onClose={onClose}\r\n      title=\"Import JSON/CSV Samples\"\r\n      actions={[\r\n        {\r\n          text: \"Add Samples\",\r\n          onClick: () => {\r\n            changeError(null)\r\n            let samples, taskOutput\r\n            try {\r\n              ;[samples, taskOutput] = JSON.parse(content).samples\r\n            } catch (e1) {\r\n              try {\r\n                const udt = fromUDTCSV(content)\r\n                ;({ samples, taskOutput } = udt)\r\n              } catch (e2) {\r\n                console.log({\r\n                  message: \"CSV/JSON Error Stacks\",\r\n                  jsonError: e1.stack,\r\n                  csvError: e2.stack,\r\n                })\r\n                changeError(\r\n                  `JSON did not parse. CSV did not parse.\\n\\nJSON Error: ${e1.toString()}\\nCSV Error: ${e2.toString()}`\r\n                )\r\n                return\r\n              }\r\n            }\r\n            if (!samples || samples.length === 0) {\r\n              changeError(\"No task data found\")\r\n              return\r\n            }\r\n            onAddSamples(samples, taskOutput)\r\n          },\r\n        },\r\n      ]}\r\n    >\r\n      <InfoText>\r\n        See the{\" \"}\r\n        <a href=\"https://github.com/UniversalDataTool/udt-format\">\r\n          UDT JSON format\r\n        </a>{\" \"}\r\n        or the{\" \"}\r\n        <a href=\"https://github.com/UniversalDataTool/udt-format\">\r\n          UDT CSV format\r\n        </a>{\" \"}\r\n        for formatting details. Or take a look at a{\" \"}\r\n        <a href=\"https://github.com/UniversalDataTool/udt-format/blob/master/SAMPLE.udt.json\">\r\n          sample JSON\r\n        </a>{\" \"}\r\n        or{\" \"}\r\n        <a href=\"https://github.com/UniversalDataTool/udt-format/blob/master/SAMPLE.udt.csv\">\r\n          sample CSV\r\n        </a>{\" \"}\r\n        file.\r\n      </InfoText>\r\n      <Error>{error}</Error>\r\n      <TextAreaWithUpload\r\n        content={content}\r\n        onChangeContent={setContent}\r\n        placeholder={\r\n          \"Paste CSV/JSON here. The file should be in the UDT JSON/CSV format.\\n\\nYou can also drag a json or csv file here (double click to open file dialog)\"\r\n        }\r\n      />\r\n    </SimpleDialog>\r\n  )\r\n}\r\n\r\nexport default ImportUDTFileDialog\r\n","// @flow weak\r\n\r\nimport React from \"react\"\r\nimport SimpleDialog from \"../SimpleDialog\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport Table from \"@material-ui/core/Table\"\r\nimport TableBody from \"@material-ui/core/TableBody\"\r\nimport TableCell from \"@material-ui/core/TableCell\"\r\nimport TableContainer from \"@material-ui/core/TableContainer\"\r\nimport TableHead from \"@material-ui/core/TableHead\"\r\nimport TableRow from \"@material-ui/core/TableRow\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst datasets = [\r\n  { name: \"Elon Musk Tweets\", type: \"text\", size: 2800 },\r\n  { name: \"Cats\", type: \"image\", size: 360 },\r\n  { name: \"VR Hand Pinching\", type: \"image\", size: 20517 },\r\n  { name: \"AI Generated Faces\", type: \"image\", size: 1999 },\r\n  { name: \"Text to Speech Audio\", type: \"audio\", size: 200 },\r\n]\r\n\r\nasync function getSamples(dataset) {\r\n  const datasetName =\r\n    dataset.name.toLowerCase().replace(/ /g, \"_\") + \".udt.json\"\r\n\r\n  const datasetUrl = `https://s3.amazonaws.com/datasets.workaround.online/${datasetName}`\r\n\r\n  return await fetch(datasetUrl)\r\n    .then((r) => r.json())\r\n    .then((r) => r.samples || r.taskData)\r\n}\r\n\r\nconst StyledButton = styled(Button)({})\r\n\r\nconst ImportToyDatasetDialog = ({ onClose, onAddSamples, open }) => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <SimpleDialog onClose={onClose} open={open} title=\"Import Toy Dataset\">\r\n      <TableContainer>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>{t(\"Name\")}</TableCell>\r\n              <TableCell>{t(\"Type\")}</TableCell>\r\n              <TableCell>{t(\"Size\")}</TableCell>\r\n              <TableCell>{t(\"Actions\")}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {datasets.map((dataset) => (\r\n              <TableRow key={dataset.name}>\r\n                <TableCell>{dataset.name}</TableCell>\r\n                <TableCell>{dataset.type}</TableCell>\r\n                <TableCell>{dataset.size}</TableCell>\r\n                <TableCell>\r\n                  <StyledButton\r\n                    data-import-toy-dataset-name={dataset.name}\r\n                    onClick={async () => {\r\n                      onAddSamples(await getSamples(dataset))\r\n                    }}\r\n                    variant=\"outlined\"\r\n                  >\r\n                    {t(\"import\")}\r\n                  </StyledButton>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </SimpleDialog>\r\n  )\r\n}\r\n\r\nexport default ImportToyDatasetDialog\r\n","// @flow weak\r\nimport React, { useState, createContext } from \"react\"\r\nimport MuiButton from \"@material-ui/core/Button\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport AssignmentReturnedIcon from \"@material-ui/icons/AssignmentReturned\"\r\nimport DescriptionIcon from \"@material-ui/icons/Description\"\r\nimport PetsIcon from \"@material-ui/icons/Pets\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\nimport PasteUrlsDialog from \"../PasteUrlsDialog\"\r\nimport classnames from \"classnames\"\r\nimport isEmpty from \"lodash/isEmpty\"\r\nimport { setIn } from \"seamless-immutable\"\r\nimport useEventCallback from \"use-event-callback\"\r\nimport ImportUDTFileDialog from \"../ImportUDTFileDialog\"\r\nimport ImportToyDataset from \"../ImportToyDatasetDialog\"\r\nimport usePosthog from \"../../utils/use-posthog\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst ButtonBase = styled(MuiButton)({\r\n  width: 240,\r\n  height: 140,\r\n  display: \"inline-flex\",\r\n  flexDirection: \"column\",\r\n  \"&.disabled\": {\r\n    backgroundColor: colors.grey[200],\r\n  },\r\n  margin: 8,\r\n  \"& .icon\": {\r\n    width: 48,\r\n    height: 48,\r\n    color: colors.grey[600],\r\n    \"&.disabled\": {\r\n      color: colors.grey[400],\r\n    },\r\n  },\r\n})\r\n\r\nconst DesktopOnlyText = styled(\"div\")({\r\n  fontSize: 11,\r\n  fontWeight: \"bold\",\r\n  color: colors.grey[600],\r\n  \"&.disabled\": {\r\n    color: colors.grey[500],\r\n  },\r\n})\r\n\r\nconst SelectDialogContext = createContext()\r\n\r\nconst Button = ({\r\n  Icon,\r\n  desktopOnly,\r\n  isDesktop,\r\n  children,\r\n  dialog,\r\n  authConfiguredOnly,\r\n  authConfig,\r\n  signedInOnly,\r\n  user,\r\n  onlySupportType,\r\n  type,\r\n}) => {\r\n  const posthog = usePosthog()\r\n\r\n  const isDisabled = () => {\r\n    if (desktopOnly) {\r\n      return { disabled: !isDesktop, disabledText: \"DESKTOP ONLY\" }\r\n    } else if (onlySupportType && !onlySupportType.includes(type)) {\r\n      return { disabled: true, disabledText: `DOESN'T SUPPORT THIS INTERFACE` }\r\n    } else if (authConfiguredOnly) {\r\n      if (signedInOnly) {\r\n        return { disabled: isEmpty(user), disabledText: \"MUST BE SIGNED IN\" }\r\n      } else {\r\n        return {\r\n          disabled: isEmpty(authConfig),\r\n          disabledText: \"AUTH MUST BE CONFIGURED\",\r\n        }\r\n      }\r\n    } else {\r\n      return { disabled: false, disabledText: \"\" }\r\n    }\r\n  }\r\n\r\n  const { disabled, disabledText } = isDisabled()\r\n\r\n  return (\r\n    <SelectDialogContext.Consumer>\r\n      {({ onChangeDialog }) => {\r\n        return (\r\n          <ButtonBase\r\n            onClick={() => {\r\n              posthog.capture(\"import_button_clicked\", {\r\n                import_button: dialog,\r\n              })\r\n              onChangeDialog(dialog)\r\n            }}\r\n            className={classnames({ disabled })}\r\n            variant=\"outlined\"\r\n            disabled={disabled}\r\n          >\r\n            <div>\r\n              <Icon className={classnames(\"icon\", { disabled })} />\r\n              <div>{children}</div>\r\n              \r\n            </div>\r\n          </ButtonBase>\r\n        )\r\n      }}\r\n    </SelectDialogContext.Consumer>\r\n  )\r\n}\r\n\r\nexport default ({\r\n  // TODO remove file, onChangeFile\r\n  file,\r\n  onChangeFile,\r\n  dataset,\r\n  onChangeDataset,\r\n  isDesktop,\r\n  authConfig,\r\n  user,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const [selectedDialog, changeDialog] = useState()\r\n\r\n  const onChangeDialog = async (dialog) => {\r\n    switch (dialog) {\r\n      default: {\r\n        return changeDialog(dialog)\r\n      }\r\n    }\r\n  }\r\n\r\n  const closeDialog = () => changeDialog(null)\r\n\r\n  const onAddSamples = useEventCallback(async (samplesToAdd) => {\r\n    onChangeDataset(\r\n      setIn(dataset, [\"samples\"], (dataset.samples || []).concat(samplesToAdd))\r\n    )\r\n    closeDialog()\r\n  })\r\n\r\n  return (\r\n    <SelectDialogContext.Provider value={{ onChangeDialog }}>\r\n      <div>\r\n        <Button\r\n          isDesktop={isDesktop}\r\n          dialog=\"paste-image-urls\"\r\n          Icon={AssignmentReturnedIcon}\r\n          authConfig={authConfig}\r\n          signedInOnly={false}\r\n          user={user}\r\n        >\r\n          {t(\"paste-urls\")}\r\n        </Button>\r\n        <Button\r\n          isDesktop={isDesktop}\r\n          dialog=\"import-toy-dataset\"\r\n          Icon={PetsIcon}\r\n        >\r\n          {t(\"import-toy-dataset\")}\r\n        </Button>\r\n        <Button dialog=\"import-csv-json\" Icon={DescriptionIcon}>\r\n          {t(\"import-from\")} CSV / JSON\r\n        </Button>\r\n        \r\n        <PasteUrlsDialog\r\n          open={selectedDialog === \"paste-image-urls\"}\r\n          onClose={closeDialog}\r\n          onAddSamples={onAddSamples}\r\n        />     \r\n        <ImportToyDataset\r\n          open={selectedDialog === \"import-toy-dataset\"}\r\n          onClose={closeDialog}\r\n          onAddSamples={onAddSamples}\r\n        />\r\n        \r\n        <ImportUDTFileDialog\r\n          open={selectedDialog === \"import-csv-json\"}\r\n          onClose={closeDialog}\r\n          onAddSamples={onAddSamples}\r\n        />\r\n      </div>\r\n    </SelectDialogContext.Provider>\r\n  )\r\n}\r\n","// @flow weak\r\n\r\nimport React, { useMemo, useState } from \"react\"\r\nimport DataTable from \"react-data-table-component\"\r\nimport IconButton from \"@material-ui/core/IconButton\"\r\nimport EditIcon from \"@material-ui/icons/Edit\"\r\nimport DeleteIcon from \"@material-ui/icons/Delete\"\r\nimport BorderColorIcon from \"@material-ui/icons/BorderColor\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport Grid from \"@material-ui/core/Grid\"\r\nimport SampleGrid from \"../SampleGrid\"\r\nimport Tabs from \"@material-ui/core/Tabs\"\r\nimport Tab from \"@material-ui/core/Tab\"\r\nimport AppsIcon from \"@material-ui/icons/Apps\"\r\nimport TableChartIcon from \"@material-ui/icons/TableChart\"\r\nimport Box from \"@material-ui/core/Box\"\r\nimport ImportIcon from \"@material-ui/icons/Publish\"\r\nimport ImportPage from \"../ImportPage\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\n\r\nconst Container = styled(\"div\")({\r\n  padding: 16,\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  boxSizing: \"border-box\",\r\n})\r\n\r\nconst SampleCounter = styled(\"div\")({\r\n  fontSize: 14,\r\n  color: colors.grey[600],\r\n  display: \"flex\",\r\n  justifyContent: \"flex-end\",\r\n  alignItems: \"center\",\r\n  flexGrow: 1,\r\n})\r\n\r\nconst ExpandedRowContainer = styled(\"div\")({\r\n  padding: 8,\r\n  border: \"#888 solid 1px\",\r\n  borderTop: \"none\",\r\n  borderRadius: 4,\r\n  borderTopLeftRadius: 0,\r\n  borderTopRightRadius: 0,\r\n  boxShadow: \"inset 0 3px 3px rgba(0,0,0,0.2)\",\r\n})\r\nconst ExpandedRowTitle = styled(\"div\")({\r\n  fontSize: 11,\r\n  fontWeight: \"bold\",\r\n})\r\nconst ExpandedRowCode = styled(\"pre\")({ whiteSpace: \"pre-wrap\", fontSize: 11 })\r\n\r\nconst ExpandedRow = ({ data }) => {\r\n  const { annotation, ...input } = data\r\n\r\n  return (\r\n    <ExpandedRowContainer>\r\n      <Grid spacing={2} container>\r\n        <Grid item xs={6}>\r\n          <ExpandedRowTitle>samples[{data.index}]:</ExpandedRowTitle>\r\n          <ExpandedRowCode>{JSON.stringify(input, null, \"  \")}</ExpandedRowCode>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <ExpandedRowTitle>samples[{data.index}].annotation:</ExpandedRowTitle>\r\n          <ExpandedRowCode>\r\n            {JSON.stringify(annotation, null, \"  \")}\r\n          </ExpandedRowCode>\r\n        </Grid>\r\n      </Grid>\r\n    </ExpandedRowContainer>\r\n  )\r\n}\r\n\r\nexport const SamplesView = ({\r\n  file,\r\n  dataset,\r\n  openSampleInputEditor,\r\n  openSampleLabelEditor,\r\n  deleteSample,\r\n  onChangeDataset,\r\n  onChangeFile,\r\n  authConfig,\r\n  user,\r\n}) => {\r\n \r\n  const [currentTab, changeTabState] = useState(\r\n    (dataset.samples || []).length === 0\r\n      ? \"import\"\r\n      : window.localStorage.lastSampleTab || \"grid\"\r\n  )\r\n  const changeTab = (tab) => {\r\n    changeTabState(tab)\r\n    window.localStorage.lastSampleTab = tab\r\n  }\r\n  const columns = useMemo(() => {\r\n    if (!dataset.samples) return []\r\n    const columns = [\r\n      {\r\n        name: \"Index\",\r\n        selector: \"index\",\r\n        sortable: true,\r\n      },\r\n    ]\r\n    const knownKeys = new Set()\r\n    for (const td of dataset.samples) {\r\n      for (const key in td) {\r\n        if (!knownKeys.has(key)) {\r\n          columns.push({\r\n            name: key,\r\n            selector: key,\r\n            cell: (row) =>\r\n              typeof row[key] !== \"object\"\r\n                ? row[key]\r\n                : JSON.stringify(row[key]).slice(0, 30) + \"...\",\r\n          })\r\n          knownKeys.add(key)\r\n        }\r\n      }\r\n    }\r\n    columns.push({\r\n      name: \"Edit\",\r\n      button: true,\r\n      cell: (row) => (\r\n        <IconButton raised onClick={() => openSampleInputEditor(row.index)}>\r\n          <EditIcon style={{ width: 20, height: 20 }} />\r\n        </IconButton>\r\n      ),\r\n    })\r\n    columns.push({\r\n      name: \"Label\",\r\n      button: true,\r\n      cell: (row) => (\r\n        <IconButton raised onClick={() => openSampleLabelEditor(row.index)}>\r\n          <BorderColorIcon style={{ width: 20, height: 20 }} />\r\n        </IconButton>\r\n      ),\r\n    })\r\n    columns.push({\r\n      name: \"Delete\",\r\n      button: true,\r\n      cell: (row) => (\r\n        <IconButton raised primary onClick={() => deleteSample(row.index)}>\r\n          <DeleteIcon style={{ width: 20, height: 20 }} />\r\n        </IconButton>\r\n      ),\r\n    })\r\n    return columns\r\n  }, [\r\n    dataset.samples,\r\n    deleteSample,\r\n    openSampleInputEditor,\r\n    openSampleLabelEditor,\r\n  ])\r\n\r\n  const data = useMemo(() => {\r\n    if (!dataset.samples) return []\r\n    return dataset.samples.map((td, i) => ({\r\n      ...td,\r\n      index: i,\r\n    }))\r\n  }, [dataset.samples])\r\n  return (\r\n    <Container>\r\n      <Box display=\"flex\">\r\n        <Tabs value={currentTab} onChange={(e, newTab) => changeTab(newTab)}>\r\n          <Tab icon={<ImportIcon />} label=\"Import\" value=\"import\" />\r\n          <Tab icon={<AppsIcon />} label=\"Grid\" value=\"grid\" />\r\n          <Tab icon={<TableChartIcon />} label=\"Table\" value=\"table\" />\r\n        </Tabs>\r\n        <SampleCounter>\r\n          {(dataset.samples || []).length} Samples\r\n          <br />\r\n          {(dataset.samples || []).filter((s) => s.annotation).length} Labels\r\n        </SampleCounter>\r\n      </Box>\r\n      <Box paddingTop={2} />\r\n      <Box flexGrow={1}>\r\n        {currentTab === \"import\" && (\r\n          <ImportPage\r\n            file={file}\r\n            onChangeFile={(file) => onChangeFile(file)}\r\n            onImportPageShouldExit={() => changeTab(\"grid\")}\r\n            onChangeDataset={(newOHA) => onChangeDataset(newOHA)}\r\n            dataset={dataset}\r\n            authConfig={authConfig}\r\n            user={user}\r\n          />\r\n        )}\r\n        {currentTab === \"grid\" && (\r\n          <SampleGrid\r\n            count={(dataset.samples || []).length}\r\n            samples={dataset.samples || []}\r\n            completed={(dataset.samples || []).map((s) =>\r\n              Boolean(s.annotation)\r\n            )}\r\n            onClick={(sampleIndex) => {\r\n              openSampleLabelEditor(sampleIndex)\r\n            }}\r\n          />\r\n        )}\r\n        {currentTab === \"table\" && (\r\n          <DataTable\r\n            title=\"Samples\"\r\n            expandableRowsComponent={<ExpandedRow />}\r\n            expandableRows\r\n            dense\r\n            columns={columns}\r\n            data={data}\r\n            pagination\r\n            paginationPerPage={10}\r\n            paginationRowsPerPageOptions={[10, 20, 25, 50, 100, 200]}\r\n          />\r\n        )}\r\n      </Box>\r\n    </Container>\r\n  )\r\n}\r\nexport default SamplesView\r\n","// @flow\r\nimport React, { useMemo } from \"react\"\r\nimport Survey from \"material-survey/components/Survey\"\r\nimport { setIn } from \"seamless-immutable\"\r\n\r\nconst form = {\r\n  questions: [\r\n    {\r\n      name: \"multiple\",\r\n      title: \"Allow multiple classifications per image?\",\r\n      type: \"boolean\",\r\n    },\r\n    {\r\n      name: \"labels\",\r\n      title: \"Labels\",\r\n      description: \"Classifications or tags to be labeled.\",\r\n      type: \"matrixdynamic\",\r\n      columns: [\r\n        { cellType: \"text\", name: \"id\", title: \"id\" },\r\n        {\r\n          cellType: \"text\",\r\n          name: \"description\",\r\n          title: \"Description (optional)\",\r\n        },\r\n      ],\r\n    },\r\n  ],\r\n}\r\n\r\nexport default ({ iface, onChange }) => {\r\n  const defaultAnswers = useMemo(\r\n    () => ({\r\n      allowMultiple: false,\r\n      labels:\r\n        (iface.labels || []).map((a) =>\r\n          typeof a === \"string\" ? { id: a, description: a } : a\r\n        ) || [],\r\n    }),\r\n    [iface.labels]\r\n  )\r\n  return (\r\n    <Survey\r\n      noActions\r\n      variant=\"flat\"\r\n      defaultAnswers={defaultAnswers}\r\n      onQuestionChange={(questionId, newValue, answers) => {\r\n        onChange(setIn(iface, [questionId], newValue))\r\n      }}\r\n      form={form}\r\n    />\r\n  )\r\n}\r\n","// @flow\r\n\r\nimport React, { useMemo } from \"react\"\r\nimport Box from \"@material-ui/core/Box\"\r\nimport Workspace from \"react-material-workspace-layout/Workspace\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\n\r\nconst HeaderLeftSideContainer = styled(\"div\")({\r\n  fontSize: 24,\r\n  fontWeight: \"bold\",\r\n})\r\n\r\nexport default ({\r\n  children,\r\n  onNext,\r\n  onPrev,\r\n  currentSampleIndex = 0,\r\n  numberOfSamples = 1,\r\n  globalSampleIndex = 1,\r\n  titleContent,\r\n  onClickHeaderItem,\r\n}: any) => {\r\n  const headerItems = useMemo(\r\n    () =>\r\n      [\r\n        (currentSampleIndex > 0 || onPrev) && { name: \"Prev\", onClick: onPrev },\r\n        (numberOfSamples > currentSampleIndex + 1 || onNext) && {\r\n          name: \"Next\",\r\n          onClick: onNext,\r\n        },\r\n        { name: \"Save\" },\r\n      ].filter(Boolean),\r\n    [currentSampleIndex, numberOfSamples, onNext, onPrev]\r\n  )\r\n  return (\r\n    <Workspace\r\n      headerLeftSide={\r\n        titleContent === undefined ? (\r\n          <Box paddingLeft={2} fontWeight=\"bold\">\r\n            <HeaderLeftSideContainer>\r\n              Sample{\" \"}\r\n              {numberOfSamples > 1\r\n                ? `${currentSampleIndex + 1} / ${numberOfSamples}`\r\n                : `${globalSampleIndex}`}\r\n            </HeaderLeftSideContainer>\r\n          </Box>\r\n        ) : (\r\n          titleContent\r\n        )\r\n      }\r\n      onClickHeaderItem={onClickHeaderItem}\r\n      headerItems={headerItems}\r\n      iconSidebarItems={[]}\r\n      rightSidebarItems={[]}\r\n    >\r\n      <Box padding={2} style={{ width: \"100%\" }}>\r\n        {children}\r\n      </Box>\r\n    </Workspace>\r\n  )\r\n}\r\n","// @flow\r\n\r\nimport React, { useState, useEffect, useMemo } from \"react\"\r\nimport useEventCallback from \"use-event-callback\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\nimport Checkbox from \"@material-ui/core/Checkbox\"\r\nimport without from \"lodash/without\"\r\nimport WorkspaceContainer from \"../WorkspaceContainer\"\r\n\r\nconst brightColors = [\r\n  colors.blue[600],\r\n  colors.green[600],\r\n  colors.red[600],\r\n  colors.deepOrange[600],\r\n  colors.pink[600],\r\n  colors.teal[600],\r\n  colors.deepPurple[600],\r\n  colors.indigo[600],\r\n  colors.blue[600],\r\n  colors.cyan[600],\r\n  colors.purple[600],\r\n]\r\n\r\nconst letters = \"abcdefghijklmnopqrstuvwxyz1234567890\".split(\"\")\r\nconst getRandomColor = (label) => {\r\n  const hashInt = label.id\r\n    .split(\"\")\r\n    .reduce((acc, v, i) => acc + (letters.indexOf(v) + 1), 0)\r\n  return brightColors[hashInt % brightColors.length]\r\n}\r\n\r\nconst Container = styled(\"div\")({\r\n  maxWidth: \"100vw\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n})\r\n\r\nconst ImageContainer = styled(\"div\")({\r\n  position: \"relative\",\r\n  display: \"flex\",\r\n  flexGrow: 1,\r\n})\r\n\r\nconst Image = styled(\"img\")({\r\n  display: \"inline-block\",\r\n  position: \"absolute\",\r\n  left: 0,\r\n  top: 0,\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  objectFit: \"contain\",\r\n})\r\n\r\nconst ButtonsContainer = styled(\"div\")({\r\n  paddingLeft: 50,\r\n  paddingRight: 50,\r\n  marginTop: 8,\r\n  textAlign: \"center\",\r\n  flexShrink: 0,\r\n})\r\n\r\nconst CheckButton = styled(Button)({\r\n  margin: 8,\r\n  color: \"#fff\",\r\n  fontSize: 18,\r\n  paddingRight: 16,\r\n  transition: \"transform 50ms ease\",\r\n})\r\n\r\nconst [emptyObj, emptyArr] = [{}, []]\r\n\r\nexport default ({\r\n  sampleIndex: globalSampleIndex,\r\n  interface: iface,\r\n  samples = emptyArr,\r\n  containerProps = emptyObj,\r\n  onSaveTaskOutputItem,\r\n}) => {\r\n  // TODO remove legacy \"availableLabels\" support\r\n  if (iface.availableLabels && !iface.labels) {\r\n    iface.labels = iface.availableLabels\r\n  }\r\n\r\n  if (!iface.labels)\r\n    throw new Error(\"No labels defined. Add some labels in Setup to continue.\")\r\n  const [sampleIndex, changeSampleIndex] = useState(0)\r\n  const [enlargedLabel, changeEnlargedLabel] = useState(null)\r\n  const [currentOutput, changeCurrentOutput] = useState(emptyArr)\r\n  const labels = useMemo(\r\n    () =>\r\n      iface.labels.map((l) =>\r\n        typeof l === \"string\" ? { id: l, description: l } : l\r\n      ),\r\n    [iface.labels]\r\n  )\r\n\r\n  const onDone = useEventCallback(() => {\r\n    if (containerProps.onExit) containerProps.onExit()\r\n  })\r\n  const onNextNoSave = useEventCallback(() => {\r\n    if (containerProps.onExit) {\r\n      containerProps.onExit(\"go-to-next\")\r\n    }\r\n  })\r\n  const onNext = useEventCallback((newOutput) => {\r\n    onSaveTaskOutputItem(sampleIndex, newOutput || currentOutput)\r\n    if (sampleIndex !== samples.length - 1) {\r\n      changeSampleIndex(sampleIndex + 1)\r\n    } else {\r\n      if (containerProps.onExit) containerProps.onExit(\"go-to-next\")\r\n    }\r\n  })\r\n  const onPrev = useEventCallback(() => {\r\n    if (sampleIndex > 0) {\r\n      changeSampleIndex(sampleIndex - 1)\r\n    } else {\r\n      if (containerProps.onExit) containerProps.onExit(\"go-to-previous\")\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n      changeEnlargedLabel(null)\r\n    }, 100)\r\n    return () => clearTimeout(timeout)\r\n  }, [enlargedLabel])\r\n\r\n  const onClickLabel = useEventCallback((label) => {\r\n    changeEnlargedLabel(label)\r\n    let newOutput\r\n    if ((currentOutput || []).includes(label.id)) {\r\n      newOutput = without(currentOutput, label.id)\r\n    } else {\r\n      if (iface.allowMultiple) {\r\n        newOutput = currentOutput.concat([label.id])\r\n      } else {\r\n        newOutput = label.id\r\n      }\r\n    }\r\n\r\n    changeCurrentOutput(newOutput)\r\n    if (!iface.allowMultiple && newOutput.length > 0) {\r\n      onNext(newOutput)\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    let newOutput = samples[sampleIndex].annotation\r\n    if (!newOutput) newOutput = []\r\n    if (typeof newOutput === \"string\") newOutput = [newOutput]\r\n    changeCurrentOutput(newOutput)\r\n  }, [sampleIndex, globalSampleIndex, samples])\r\n\r\n  const [hotkeyMap, labelKeyMap] = useMemo(() => {\r\n    const hotkeyMap = {\r\n      \" \": onNext,\r\n      backspace: onPrev,\r\n      enter: onDone,\r\n      rightarrow: onNext,\r\n      leftarrow: onPrev,\r\n    }\r\n    const labelKeyMap = {}\r\n    for (let label of labels) {\r\n      const nextAvailableLetter = label.id\r\n        .split(\"\")\r\n        .filter((l) => letters.includes(l))\r\n        .find((l) => !hotkeyMap[l.toLowerCase()])\r\n      if (!nextAvailableLetter) continue\r\n      hotkeyMap[nextAvailableLetter] = () => onClickLabel(label)\r\n      labelKeyMap[label.id] = nextAvailableLetter\r\n    }\r\n    return [hotkeyMap, labelKeyMap]\r\n  }, [labels, onClickLabel, onDone, onNext, onPrev])\r\n\r\n  useEffect(() => {\r\n    const onKeyDown = (e) => {\r\n      const key = e.key.toLowerCase()\r\n      if (hotkeyMap[key]) {\r\n        hotkeyMap[key]()\r\n      }\r\n    }\r\n    window.addEventListener(\"keydown\", onKeyDown)\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", onKeyDown)\r\n    }\r\n  }, [hotkeyMap])\r\n\r\n  return (\r\n    <WorkspaceContainer\r\n      onNext={onNextNoSave}\r\n      onPrev={onPrev}\r\n      onClickHeaderItem={onDone}\r\n      numberOfSamples={samples.length}\r\n      currentSampleIndex={sampleIndex}\r\n      globalSampleIndex={globalSampleIndex}\r\n    >\r\n      <Container\r\n        style={{\r\n          height: containerProps.height || \"calc(100% - 70px)\",\r\n          minHeight: 600,\r\n        }}\r\n      >\r\n        <ImageContainer>\r\n          <Image src={samples[sampleIndex].imageUrl} />\r\n        </ImageContainer>\r\n        <ButtonsContainer>\r\n          {labels.map((label) => (\r\n            <CheckButton\r\n              key={label.id}\r\n              onClick={() => onClickLabel(label)}\r\n              style={{\r\n                backgroundColor: getRandomColor(label),\r\n                transform:\r\n                  enlargedLabel === label ? \"scale(1.1,1.1)\" : undefined,\r\n              }}\r\n            >\r\n              <Checkbox\r\n                style={{ color: \"#fff\" }}\r\n                checked={currentOutput.includes(label.id)}\r\n              />\r\n              {label.id}\r\n              {labelKeyMap[label.id] ? ` (${labelKeyMap[label.id]})` : \"\"}\r\n            </CheckButton>\r\n          ))}\r\n        </ButtonsContainer>\r\n      </Container>\r\n    </WorkspaceContainer>\r\n  )\r\n}\r\n","// @flow\r\n\r\nimport React from \"react\"\r\nimport Typography from \"@material-ui/core/Typography\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    padding: 50,\r\n    textAlign: \"center\",\r\n  },\r\n  title: {\r\n    margin: 50,\r\n  },\r\n  explain: {},\r\n})\r\n\r\nexport default ({ title, description, children }) => {\r\n  const c = useStyles()\r\n  return (\r\n    <div className={c.root}>\r\n      <Typography variant=\"h4\" component=\"div\" className={c.title}>\r\n        {title}\r\n      </Typography>\r\n      <Typography variant=\"h6\" component=\"div\" className={c.explain}>\r\n        {description || children}\r\n      </Typography>\r\n    </div>\r\n  )\r\n}\r\n","// @flow\r\n\r\nimport React from \"react\"\r\nimport BadOHA from \"../BadOHA\"\r\n\r\nexport default () => {\r\n  return (\r\n    <BadOHA title=\"No Samples to Show\">\r\n      Make sure that <code>samples</code> is defined and not empty.\r\n      <br />\r\n      <br />\r\n      Need help setting up? {/*<a href=\"#\">Check out this tutorial.</a>*/}\r\n    </BadOHA>\r\n  )\r\n}\r\n","// @flow\r\nimport React, { useMemo } from \"react\"\r\nimport ImageClassification from \"../ImageClassification\"\r\nimport EmptySampleContainer from \"../EmptySampleContainer\"\r\nimport BadOHA from \"../BadOHA\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nexport const UniversalDataViewer = ({\r\n  dataset,\r\n  onExit,\r\n  hideHeader,\r\n  hideDescription,\r\n  datasetName,\r\n  requireCompleteToPressNext,\r\n  onSaveTaskOutputItem,\r\n  height,\r\n  onClickSetup,\r\n}) => {\r\n  // TODO type check w/ superstruct against dataset\r\n  const { t } = useTranslation()\r\n  const containerProps = useMemo(\r\n    () => ({\r\n      hideHeader,\r\n      hideDescription,\r\n      datasetName,\r\n      requireCompleteToPressNext,\r\n      onExit,\r\n      height,\r\n    }),\r\n    [\r\n      hideHeader,\r\n      hideDescription,\r\n      requireCompleteToPressNext,\r\n      datasetName,\r\n      height,\r\n      onExit,\r\n    ]\r\n  )\r\n\r\n  if (!dataset || !dataset.interface.type) {\r\n    return (\r\n      <BadOHA\r\n        title=\"Set up your project to begin labeling\"\r\n        description={\r\n          <p>\r\n            {t(\"universal-data-viewer-interface-warning\")}\r\n            <br />\r\n            <br />\r\n            <Button color=\"primary\" variant=\"contained\" onClick={onClickSetup}>\r\n              {t(\"setup-project\")}\r\n            </Button>\r\n          </p>\r\n        }\r\n      />\r\n    )\r\n  }\r\n\r\n  if (!dataset.samples || dataset.samples.length === 0) {\r\n    return <EmptySampleContainer />\r\n  }\r\n\r\n  switch (dataset.interface.type) {   \r\n    case \"image_classification\":\r\n      return (\r\n        <ImageClassification\r\n          containerProps={containerProps}\r\n          {...dataset}\r\n          onExit={onExit}\r\n          onSaveTaskOutputItem={onSaveTaskOutputItem}\r\n        />\r\n      )\r\n    default:\r\n      return `\"${dataset.interface.type}\" not supported`\r\n  }\r\n}\r\n\r\nexport default UniversalDataViewer\r\n","import * as Sentry from \"@sentry/browser\"\r\n\r\nSentry.init({\r\n  dsn: \"https://bc19fbac222243f08f0abaf6d66f2034@sentry.io/5182632\",\r\n  whitelistUrls: [\"https://universaldatatool.com\", \"^file:?:\"],\r\n})\r\n\r\nexport default Sentry\r\n","// @flow weak\r\n\r\nimport React from \"react\"\r\nimport Sentry from \"../../utils/sentry.js\"\r\nimport BadOHA from \"../BadOHA\"\r\n\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { hasError: false }\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI.\r\n    console.error(\r\n      \"The following error occurred when loading a labeling interface:\",\r\n      error\r\n    )\r\n    return {\r\n      hasError: true,\r\n      errorString: error.toString(),\r\n    }\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    // You can also log the error to an error reporting service\r\n    Sentry.withScope((scope) => {\r\n      scope.setExtras(errorInfo)\r\n      const eventId = Sentry.captureException(error)\r\n      this.setState({ eventId })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return (\r\n        <BadOHA\r\n          title=\"An error occurred loading the labeling interface\"\r\n          description={this.state.errorString}\r\n        />\r\n      )\r\n    }\r\n\r\n    return this.props.children\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary\r\n","// @flow weak\r\n\r\nimport React, { useState, useEffect } from \"react\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport templates, { templateMap } from \"../StartingPage/templates\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport Box from \"@material-ui/core/Box\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\nimport ConfigureImageClassification from \"../ConfigureImageClassification\"\r\nimport UniversalDataViewer from \"../UniversalDataViewer\"\r\nimport Grid from \"@material-ui/core/Grid\"\r\nimport LabelErrorBoundary from \"../LabelErrorBoundary\"\r\nimport useEventCallback from \"use-event-callback\"\r\n\r\nconst noop = () => {}\r\n\r\nconst Container = styled(\"div\")({\r\n  padding: 24,\r\n  \"&.emptyState\": {\r\n    textAlign: \"center\",\r\n    backgroundColor: colors.blue[800],\r\n    minHeight: \"70vh\",\r\n    padding: 64,\r\n    \"& .bigText\": {\r\n      textAlign: \"left\",\r\n      fontSize: 48,\r\n      color: \"#fff\",\r\n      fontWeight: \"bold\",\r\n      marginBottom: 48,\r\n    },\r\n  },\r\n})\r\n\r\nconst BigButton = styled(Button)({\r\n  padding: 10,\r\n  width: 200,\r\n  height: 150,\r\n  boxShadow: \"0px 3px 5px rgba(0,0,0,0.3)\",\r\n  margin: 12,\r\n  backgroundColor: \"#fff\",\r\n  \"& .bigIcon\": {\r\n    marginTop: 16,\r\n    width: 64,\r\n    height: 64,\r\n  },\r\n  \"&:hover\": {\r\n    backgroundColor: \"#fff\",\r\n  },\r\n})\r\n\r\nconst NoOptions = styled(\"div\")({\r\n  fontSize: 18,\r\n  textAlign: \"center\",\r\n  fontWeight: \"bold\",\r\n  color: colors.grey[500],\r\n  paddingTop: 30,\r\n  paddingBottom: 50,\r\n})\r\n\r\nconst TypeButton = styled(Button)({\r\n  margin: 8,\r\n  \"& .icon\": {\r\n    marginRight: 8,\r\n    color: \"#888\",\r\n  },\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n  \"&.selected\": {\r\n    backgroundColor: colors.blue[500],\r\n    color: \"#fff\",\r\n    \"& .icon\": {\r\n      color: \"#fff\",\r\n    },\r\n  },\r\n})\r\n\r\nexport const Heading = styled(\"div\")({\r\n  fontWeight: \"bold\",\r\n  textTransform: \"uppercase\",\r\n  fontSize: 12,\r\n  paddingLeft: 8,\r\n  marginBottom: 8,\r\n  marginTop: 16,\r\n  color: colors.grey[700],\r\n})\r\n\r\nconst PreviewContainer = styled(\"div\")({\r\n  display: \"flex\",\r\n  justifyContent: \"space-around\",\r\n  mouseEvents: \"none\",\r\n  padding: 16,\r\n})\r\nconst PreviewContent = styled(\"div\")({\r\n  display: \"flex\",\r\n  width: \"100%\",\r\n  height: 600,\r\n})\r\n\r\nconst SelectType = ({ currentlySelected, onChange }) => {\r\n  return templates.map((t) => (\r\n    <TypeButton\r\n      key={t.dataset.interface.type || \"empty\"}\r\n      className={\r\n        currentlySelected === t.dataset.interface.type ? \"selected\" : \"\"\r\n      }\r\n      variant=\"outlined\"\r\n      onClick={() => {\r\n        if (currentlySelected !== t.dataset.interface.type) {\r\n          onChange(t.dataset.interface.type)\r\n        }\r\n      }}\r\n    >\r\n      <t.Icon className=\"icon\" />\r\n      {t.name}\r\n    </TypeButton>\r\n  ))\r\n}\r\n\r\nexport const ConfigureInterface = ({\r\n  iface = {},\r\n  onChange: onChangeProp,\r\n  onClickEditJSON,\r\n  isNested = false,\r\n}) => {\r\n  const [previewChangedTime, changePreviewChangedTime] = useState(0)\r\n  const [previewLoading, changePreviewLoading] = useState(false)\r\n  const onChange = useEventCallback((...args) => {\r\n    changePreviewChangedTime(Date.now())\r\n    onChangeProp(...args)\r\n  })\r\n  useEffect(() => {\r\n    if (Date.now() - previewChangedTime > 1000) return\r\n    changePreviewLoading(true)\r\n    let timeout = setTimeout(() => {\r\n      changePreviewLoading(false)\r\n    }, 1000)\r\n    return () => {\r\n      clearTimeout(timeout)\r\n    }\r\n  }, [previewChangedTime])\r\n\r\n  if (!iface.type || iface.type === \"empty\") {\r\n    return (\r\n      <Container className=\"emptyState\">\r\n        <div className=\"bigText\">Choose an Interface:</div>\r\n        {templates\r\n          .filter((t) => t.name !== \"Empty\")\r\n          .map((template) => (\r\n            <BigButton\r\n              key={template.name}\r\n              onClick={() => onChange(template.dataset.interface)}\r\n            >\r\n              <div>\r\n                <div>{template.name}</div>\r\n                <div>\r\n                  <template.Icon className=\"bigIcon\" />\r\n                </div>\r\n              </div>\r\n            </BigButton>\r\n          ))}\r\n      </Container>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Heading>Interface Type</Heading>\r\n      <SelectType\r\n        currentlySelected={iface.type}\r\n        onChange={(type) => {\r\n          onChange(\r\n            templates\r\n              .map((t) => t.dataset.interface)\r\n              .find((t) => t.type === type) || {}\r\n          )\r\n        }}\r\n      />\r\n      <Grid container>\r\n        <Grid item hidden={isNested} xs={12} lg={6}>\r\n          <Heading>Preview</Heading>\r\n          <PreviewContainer>\r\n            <PreviewContent\r\n              style={{ opacity: previewLoading ? 0.5 : 1, height: \"100%\" }}\r\n            >\r\n              <LabelErrorBoundary key={previewChangedTime}>\r\n                <UniversalDataViewer\r\n                  key={previewChangedTime}\r\n                  height={600}\r\n                  onExit={noop}\r\n                  onSaveTaskOutputItem={noop}\r\n                  dataset={{\r\n                    interface: iface,\r\n                    samples: [templateMap[iface.type].dataset.samples[0]],\r\n                  }}\r\n                />\r\n              </LabelErrorBoundary>\r\n            </PreviewContent>\r\n          </PreviewContainer>\r\n        </Grid>\r\n        <Grid item xs={12} lg={isNested ? 12 : 6}>\r\n          <Heading>Options</Heading>\r\n          <Box paddingTop={2} />\r\n          {!iface.type && <NoOptions>Select a Type</NoOptions>}\r\n          {iface.type === \"image_classification\" && (\r\n            <ConfigureImageClassification iface={iface} onChange={onChange} />\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default ConfigureInterface\r\n","// @flow\r\n\r\nimport { styled } from \"@material-ui/core/styles\"\r\n\r\nexport const PaperContainer = styled(\"div\")({\r\n  margin: 16,\r\n  padding: 16,\r\n  border: \"1px solid #ccc\",\r\n  borderRadius: 4,\r\n  boxShadow: \"0px 2px 2px rgba(0,0,0,0.1)\",\r\n})\r\n\r\nexport default PaperContainer\r\n","export const defaultHotkeys = [\r\n  {\r\n    id: \"switch_to_label\",\r\n    description: \"Go to Labels Tab\",\r\n    binding: \"shift+3\",\r\n  },\r\n  {\r\n    id: \"switch_to_setup\",\r\n    description: \"Go to Setup Tab\",\r\n    binding: \"shift+1\",\r\n  },\r\n  {\r\n    id: \"switch_to_samples\",\r\n    description: \"Go to Samples Tab\",\r\n    binding: \"shift+2\",\r\n  },\r\n  {\r\n    id: \"select_tool\",\r\n    description: \"Switch to the Select Tool\",\r\n    binding: \"escape\",\r\n  },\r\n  {\r\n    id: \"zoom_tool\",\r\n    description: \"Select the Zoom Tool\",\r\n    binding: \"z\",\r\n  },\r\n  {\r\n    id: \"create_point\",\r\n    description: \"Create a point\",\r\n  },\r\n  {\r\n    id: \"create_bounding_box\",\r\n    description: \"Create a bounding box\",\r\n    binding: \"b\",\r\n  },\r\n  {\r\n    id: \"pan_tool\",\r\n    description: \"Select the Pan Tool\",\r\n    binding: \"p\",\r\n  },\r\n  {\r\n    id: \"create_polygon\",\r\n    description: \"Create a Polygon\",\r\n  },\r\n  {\r\n    id: \"create_pixel\",\r\n    description: \"Create a Pixel Mask\",\r\n  },\r\n  {\r\n    id: \"save_and_previous_sample\",\r\n    description: \"Save and go to previous sample\",\r\n    binding: \"a\",\r\n  },\r\n  {\r\n    id: \"save_and_next_sample\",\r\n    description: \"Save and go to next sample\",\r\n    binding: \"d\",\r\n  },\r\n  {\r\n    id: \"save_and_exit_sample\",\r\n    description: \"Save and exit current sample\",\r\n  },\r\n  {\r\n    id: \"exit_sample\",\r\n    description: \"Exit sample without saving\",\r\n  },\r\n]\r\nexport default defaultHotkeys\r\n","import React, { createContext, useContext, useMemo } from \"react\"\r\nimport { defaultHotkeys } from \"./default-hotkeys\"\r\nimport { useAppConfig } from \"../AppConfig\"\r\n\r\nexport const HotkeyContext = createContext({\r\n  hotkeys: defaultHotkeys,\r\n  changeHotkey: (id, newBinding) => null,\r\n})\r\n\r\nexport const useHotkeyStorage = () => useContext(HotkeyContext)\r\n\r\nexport const HotkeyStorageProvider = ({ children }) => {\r\n  const { fromConfig, setInConfig } = useAppConfig()\r\n\r\n  const hotkeys = useMemo(\r\n    () =>\r\n      defaultHotkeys.map((item) => {\r\n        if (fromConfig(`hotkeys.${item.id}`)) {\r\n          return { ...item, binding: fromConfig(`hotkeys.${item.id}`) }\r\n        } else {\r\n          return item\r\n        }\r\n      }),\r\n    [fromConfig]\r\n  )\r\n\r\n  const keyMap = useMemo(() => {\r\n    const keyMap = {}\r\n    for (const { id, binding } of hotkeys) {\r\n      if (!binding) continue\r\n      keyMap[id] = binding\r\n    }\r\n    return keyMap\r\n  }, [hotkeys])\r\n\r\n  const contextValue = useMemo(\r\n    () => ({\r\n      hotkeys,\r\n      keyMap,\r\n      clearHotkeys: () => {\r\n        for (const { id } of hotkeys) {\r\n          setInConfig(`hotkeys.${id}`, null)\r\n        }\r\n      },\r\n      changeHotkey: (id, newBinding) =>\r\n        setInConfig(`hotkeys.${id}`, newBinding),\r\n    }),\r\n    [setInConfig, hotkeys, keyMap]\r\n  )\r\n\r\n  return (\r\n    <HotkeyContext.Provider value={contextValue}>\r\n      {children}\r\n    </HotkeyContext.Provider>\r\n  )\r\n}\r\n\r\nexport { defaultHotkeys }\r\n","import React, { useMemo, useContext, createContext } from \"react\"\r\nimport { useLocalStorage } from \"react-use\"\r\nimport { defaultHotkeys } from \"../HotkeyStorage\"\r\n\r\nconst configKeyNames = [\r\n \r\n  ...defaultHotkeys.map(({ id }) => `hotkeys.${id}`),\r\n]\r\n\r\n// NOTE: appConfig should not allow any nested values\r\nexport const AppConfigContext = createContext({\r\n  appConfig: {},\r\n  setAppConfig: (newConfig) => undefined,\r\n  fromConfig: (key) => undefined,\r\n  setInConfig: (key, value) => undefined,\r\n})\r\n\r\nexport const useAppConfig = () => useContext(AppConfigContext)\r\n\r\nexport const AppConfigProvider = ({ children }) => {\r\n  const [appConfig, setAppConfig] = useLocalStorage(\"app_config\", {})\r\n  const contextValue = useMemo(() => {\r\n    return {\r\n      appConfig,\r\n      setAppConfig,\r\n      fromConfig: (key) => {\r\n        if (!configKeyNames.includes(key)) {\r\n          throw new Error(`Unknown config key name \"${key}\"`)\r\n        }\r\n        return appConfig[key]\r\n      },\r\n      setInConfig: (key, value) => {\r\n        if (\r\n          typeof value !== \"string\" &&\r\n          typeof value !== \"number\" &&\r\n          typeof value !== \"boolean\" &&\r\n          value !== undefined &&\r\n          value !== null\r\n        ) {\r\n          throw new Error(\r\n            `Config can only have boolean/strings/numbers/null/undefined, something tried to set appConfig[\"${key}\"] = ${JSON.stringify(\r\n              value\r\n            )}`\r\n          )\r\n        }\r\n        if (!configKeyNames.includes(key)) {\r\n          throw new Error(`Unknown config key name \"${key}\"`)\r\n        }\r\n        setAppConfig({ ...appConfig, [key]: value })\r\n      },\r\n    }\r\n  }, [appConfig, setAppConfig])\r\n  return (\r\n    <AppConfigContext.Provider value={contextValue}>\r\n      {children}\r\n    </AppConfigContext.Provider>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport SimpleDialog from \"../SimpleDialog\"\r\nimport Table from \"@material-ui/core/Table\"\r\nimport TableBody from \"@material-ui/core/TableBody\"\r\nimport TableCell from \"@material-ui/core/TableCell\"\r\nimport TableContainer from \"@material-ui/core/TableContainer\"\r\nimport TableHead from \"@material-ui/core/TableHead\"\r\nimport TableRow from \"@material-ui/core/TableRow\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport EditIcon from \"@material-ui/icons/Edit\"\r\n\r\nconst useStyles = makeStyles({\r\n  table: {},\r\n})\r\n\r\nconst hotkeyIconStyle = { marginLeft: 8, width: 16, height: 16 }\r\n\r\nexport default ({\r\n  open,\r\n  onClose,\r\n  onChangeHotkey,\r\n  hotkeyList,\r\n  onClearHotkeys,\r\n}) => {\r\n  const classes = useStyles()\r\n  const [selectedHotKey, setSelectedHotKey] = useState()\r\n  const [{ modifier, key }, setCurrentKeyCombo] = useState({})\r\n\r\n  useEffect(() => {\r\n    if (!selectedHotKey) return\r\n    function keyListener(e) {\r\n      if ([\"shift\", \"ctrl\", \"cmd\", \"alt\"].includes(e.key.toLowerCase())) {\r\n        setCurrentKeyCombo({ modifier: e.key.toLowerCase(), key })\r\n      }\r\n      if (e.key.length === 1) {\r\n        setCurrentKeyCombo({ modifier, key: e.key.toLowerCase() })\r\n      }\r\n    }\r\n    window.addEventListener(\"keydown\", keyListener)\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", keyListener)\r\n    }\r\n  }, [selectedHotKey, key, modifier, setCurrentKeyCombo])\r\n\r\n  useEffect(() => {\r\n    if (!key) return\r\n    if (modifier) {\r\n      onChangeHotkey(selectedHotKey, `${modifier} + ${key}`)\r\n    } else {\r\n      onChangeHotkey(selectedHotKey, key)\r\n    }\r\n    setCurrentKeyCombo({})\r\n    setSelectedHotKey(null)\r\n  }, [modifier, key, onChangeHotkey, selectedHotKey])\r\n\r\n  return (\r\n    <SimpleDialog\r\n      title=\"Manage Keyboard Shortcuts\"\r\n      actions={[\r\n        {\r\n          text: \"Clear Hotkeys\",\r\n          onClick: onClearHotkeys,\r\n        },\r\n      ]}\r\n      open={open}\r\n      onClose={onClose}\r\n    >\r\n      <TableContainer>\r\n        <Table className={classes.table} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Action</TableCell>\r\n              <TableCell align=\"right\">Keyboard Shortcut</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {hotkeyList.map((hotkey) => (\r\n              <TableRow key={hotkey.description}>\r\n                <TableCell>{hotkey.description}</TableCell>\r\n                <TableCell align=\"right\">\r\n                  <Button\r\n                    onClick={() => {\r\n                      if (selectedHotKey !== hotkey) {\r\n                        setSelectedHotKey(hotkey)\r\n                        setCurrentKeyCombo({})\r\n                        return\r\n                      }\r\n                    }}\r\n                    style={{ minWidth: 0 }}\r\n                  >\r\n                    <b>\r\n                      {selectedHotKey === hotkey\r\n                        ? modifier || key\r\n                          ? `<${modifier ? modifier + \"+\" : \"\"}${key || \"???\"}>`\r\n                          : \"<Press Any Key>\"\r\n                        : hotkey.binding}\r\n                    </b>\r\n                    {selectedHotKey === hotkey ? (\r\n                      <EditIcon style={hotkeyIconStyle} />\r\n                    ) : (\r\n                      <EditIcon style={hotkeyIconStyle} />\r\n                    )}\r\n                  </Button>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </SimpleDialog>\r\n  )\r\n}\r\n","import React, { useState } from \"react\"\r\nimport Box from \"@material-ui/core/Box\"\r\nimport MuiButton from \"@material-ui/core/Button\"\r\nimport { useUpdate } from \"react-use\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport usePosthog from \"../../utils/use-posthog\"\r\nimport { useAppConfig } from \"../AppConfig\"\r\nimport { useHotkeyStorage } from \"../HotkeyStorage\"\r\nimport KeyboardShortcutManagerDialog from \"../KeyboardShortcutManagerDialog\"\r\n\r\nimport { useTranslation } from \"react-i18next\"\r\n\r\nconst Button = styled(MuiButton)({\r\n  margin: 8,\r\n})\r\n\r\nexport const AdvancedOptionsView = ({ onClickEditJSON, onClearLabelData }) => {\r\n  const forceUpdate = useUpdate()\r\n  const posthog = usePosthog()\r\n  const { fromConfig, setInConfig } = useAppConfig()\r\n  const { hotkeys, changeHotkey, clearHotkeys } = useHotkeyStorage()\r\n  const [hotkeyDialogOpen, setHotkeyDialogOpen] = useState(false)\r\n\r\n  // internalization hook\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Box padding={2}>\r\n      <Button onClick={onClickEditJSON} variant=\"outlined\">\r\n        {t(\"added-json\")}\r\n      </Button>\r\n      <Button\r\n        onClick={() => {\r\n          if (\r\n            window.confirm(\r\n              \"Are you sure you want to delete all your label data? Click OK to delete.\"\r\n            )\r\n          ) {\r\n            onClearLabelData()\r\n          }\r\n        }}\r\n        variant=\"outlined\"\r\n      >\r\n        {t(\"clear-labels\")}\r\n      </Button>\r\n      <Button\r\n        variant=\"outlined\"\r\n        onClick={() => {\r\n          // TODO store in appConfig\r\n          const response = window.prompt(\r\n            \"Input URL for new collaboration server (empty to use universaldatatool.com):\",\r\n            window.localStorage.getItem(\"CUSTOM_COLLABORATION_SERVER\") || \"\"\r\n          )\r\n          if (response === null) return\r\n          window.localStorage.setItem(\"CUSTOM_COLLABORATION_SERVER\", response)\r\n          window.location.reload()\r\n        }}\r\n      >\r\n        {t(\"custom-collobration-server\")}\r\n      </Button>\r\n      <Button\r\n        variant=\"outlined\"\r\n        onClick={() => {\r\n          setHotkeyDialogOpen(true)\r\n        }}\r\n      >\r\n        Change/View Hotkeys\r\n      </Button>\r\n      <KeyboardShortcutManagerDialog\r\n        open={hotkeyDialogOpen}\r\n        hotkeyList={hotkeys}\r\n        onClose={() => setHotkeyDialogOpen(false)}\r\n        onClearHotkeys={clearHotkeys}\r\n        onChangeHotkey={(hotkey, newBinding) =>\r\n          changeHotkey(hotkey.id, newBinding)\r\n        }\r\n      />\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default AdvancedOptionsView\r\n","// @flow weak\r\n\r\nimport React from \"react\"\r\nimport ConfigureInterface, { Heading } from \"../ConfigureInterface\"\r\nimport PaperContainer from \"../PaperContainer\"\r\nimport AdvancedOptionsView from \"../AdvancedOptionsView\"\r\n\r\nexport default ({ dataset, onChange, onClickEditJSON, onClearLabelData }) => {\r\n  const { interface: iface } = dataset\r\n\r\n  return (\r\n    <div>\r\n      <ConfigureInterface\r\n        iface={iface}\r\n        onChange={onChange}\r\n        onClickEditJSON={onClickEditJSON}\r\n        isNotNested\r\n      />\r\n      <PaperContainer>\r\n        <Heading>Advanced</Heading>\r\n        <AdvancedOptionsView\r\n          onClearLabelData={onClearLabelData}\r\n          onClickEditJSON={onClickEditJSON}\r\n        />\r\n      </PaperContainer>\r\n    </div>\r\n  )\r\n}\r\n","// @flow\r\n\r\nimport React, { useState, useEffect } from \"react\"\r\nimport Box from \"@material-ui/core/Box\"\r\nimport AceEditor from \"react-ace\"\r\nimport SimpleDialog from \"../SimpleDialog\"\r\n\r\nexport default ({ open, sampleIndex, sampleInput, onChange, onClose }) => {\r\n  const [text, changeText] = useState()\r\n  const [error, changeError] = useState()\r\n  useEffect(() => {\r\n    const newText = JSON.stringify(sampleInput, null, \"  \")\r\n    if (newText !== text) {\r\n      changeText(newText)\r\n      changeError(null)\r\n    }\r\n  }, [sampleIndex, sampleInput, text])\r\n\r\n  return (\r\n    <SimpleDialog\r\n      open={open}\r\n      onClose={onClose}\r\n      title={`samples[${sampleIndex}]`}\r\n    >\r\n      <AceEditor\r\n        theme=\"github\"\r\n        mode=\"javascript\"\r\n        width=\"100%\"\r\n        value={text}\r\n        editorProps={{ $blockScrolling: Infinity }}\r\n        onChange={(t) => {\r\n          changeText(t)\r\n          changeError(null)\r\n          try {\r\n            onChange(JSON.parse(t))\r\n          } catch (e) {\r\n            changeError(e.toString())\r\n          }\r\n        }}\r\n      />\r\n      <Box color=\"red\">{error}</Box>\r\n    </SimpleDialog>\r\n  )\r\n}\r\n","// @flow\r\nimport React, { createContext, useContext, useEffect, useReducer } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\nimport Collapse from \"@material-ui/core/Collapse\"\r\nimport Fade from \"@material-ui/core/Fade\"\r\nimport classNames from \"classnames\"\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: \"fixed\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    alignItems: \"flex-start\",\r\n    pointerEvents: \"none\",\r\n  },\r\n  msgBox: {\r\n    display: \"flex\",\r\n    backgroundColor: colors.blue[700],\r\n    fontSize: 12,\r\n    color: \"#fff\",\r\n    padding: 4,\r\n    marginBottom: 4,\r\n    boxShadow: \"0px 3px 8px rgba(0,0,0,0.5)\",\r\n    \"&.warning\": {\r\n      backgroundColor: colors.orange[700],\r\n    },\r\n    \"&.error\": {\r\n      backgroundColor: colors.red[700],\r\n    },\r\n  },\r\n})\r\n\r\nconst REFRESH_INTERVAL = 100\r\n\r\nconst ToastContext = createContext({})\r\n\r\nexport const useToasts = () => {\r\n  const { addToast } = useContext(ToastContext)\r\n\r\n  return { addToast }\r\n}\r\n\r\nexport const ToastProvider = ({ children }) => {\r\n  const [toasts, changeToasts] = useReducer((state = [], action) => {\r\n    if (action.type === \"add\") {\r\n      const fullLife =\r\n        action.messageType === \"info\"\r\n          ? 2000\r\n          : action.messageType === \"warning\"\r\n          ? 5000\r\n          : 5000\r\n\r\n      return state.concat([\r\n        {\r\n          id: Math.random().toString().split(\".\")[1],\r\n          message: action.message,\r\n          type: action.messageType,\r\n          life: fullLife,\r\n          fullLife,\r\n        },\r\n      ])\r\n    } else if (action.type === \"tick\") {\r\n      return state\r\n        .map((msg) => ({\r\n          ...msg,\r\n          life: msg.life - REFRESH_INTERVAL,\r\n        }))\r\n        .filter((msg) => msg.life > 0)\r\n    }\r\n    return state\r\n  }, [])\r\n  const c = useStyles()\r\n\r\n  useEffect(() => {\r\n    if (toasts.length === 0) return () => {}\r\n    let interval = setInterval(() => {\r\n      changeToasts({ type: \"tick\" })\r\n    }, REFRESH_INTERVAL)\r\n    return () => clearInterval(interval)\r\n  }, [toasts])\r\n\r\n  const addToast = (message: string, messageType: string = \"info\") =>\r\n    changeToasts({ type: \"add\", message, messageType })\r\n\r\n  return (\r\n    <>\r\n      <ToastContext.Provider value={{ toasts, addToast }}>\r\n        {children}\r\n      </ToastContext.Provider>\r\n      <div className={c.root}>\r\n        {toasts.map((msg) => (\r\n          <Collapse key={msg.id} in={msg.life < msg.fullLife}>\r\n            <Fade in={msg.life > 600}>\r\n              <div className={classNames(c.msgBox, msg.type)}>\r\n                {msg.message}\r\n              </div>\r\n            </Fade>\r\n          </Collapse>\r\n        ))}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","// @flow weak\r\n\r\nimport React from \"react\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\n\r\nconst Container = styled(\"div\")({})\r\nconst Stat = styled(\"div\")({\r\n  display: \"inline-flex\",\r\n  flexDirection: \"column\",\r\n  margin: 8,\r\n})\r\nconst Label = styled(\"div\")({\r\n  fontSize: 14,\r\n  fontWeight: \"bold\",\r\n  color: colors.grey[700],\r\n})\r\nconst Value = styled(\"div\")({\r\n  fontSize: 32,\r\n  marginTop: 8,\r\n})\r\n\r\nexport default ({ stats }) => {\r\n  return (\r\n    <Container>\r\n      {stats.map((s) => (\r\n        <Stat key={s.name}>\r\n          <Label>{s.name}</Label>\r\n          <Value>{s.value}</Value>\r\n        </Stat>\r\n      ))}\r\n    </Container>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from \"react\"\r\nimport LabelErrorBoundary from \"../LabelErrorBoundary\"\r\nimport UniversalDataViewer from \"../UniversalDataViewer\"\r\nimport Stats from \"../Stats\"\r\nimport SampleGrid from \"../SampleGrid\"\r\nimport Box from \"@material-ui/core/Box\"\r\nimport { setIn } from \"seamless-immutable\"\r\nimport usePosthog from \"../../utils/use-posthog\"\r\nimport duration from \"duration\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport Tabs from \"@material-ui/core/Tabs\"\r\nimport Tab from \"@material-ui/core/Tab\"\r\nimport BorderColorIcon from \"@material-ui/icons/BorderColor\"\r\n// import SupervisedUserCircleIcon from \"@material-ui/icons/SupervisedUserCircle\"\r\n// import DataUsageIcon from \"@material-ui/icons/DataUsage\"\r\n// import useIsLabelOnlyMode from \"../../utils/use-is-label-only-mode\"\r\n\r\nconst OverviewContainer = styled(\"div\")({\r\n  padding: 16,\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  boxSizing: \"border-box\",\r\n})\r\n\r\nexport default ({\r\n  dataset,\r\n  onChangeDataset,\r\n  singleSampleDataset,\r\n  onChangeSingleSampleDataset,\r\n  selectedBrush = \"complete\",\r\n  onClickSetup,\r\n  onChangeSampleTimeToComplete,\r\n  sampleTimeToComplete,\r\n}) => {\r\n  const [currentTab, setTab] = useState(\"label\")\r\n  const posthog = usePosthog()\r\n\r\n  // const labelOnlyMode = useIsLabelOnlyMode()\r\n  let percentComplete = 0\r\n  if (dataset.samples && dataset.samples.length > 0) {\r\n    percentComplete =\r\n      dataset.samples\r\n        .map((s) => s.annotation !== undefined && s.annotation !== null)\r\n        .filter(Boolean).length / dataset.samples.length\r\n  }\r\n\r\n  \r\n  useEffect(() => {\r\n    if (currentTab === \"labelhelp\") {\r\n      posthog.capture(\"label_help_clicked\")\r\n    }\r\n  }, [currentTab, posthog])\r\n\r\n  return singleSampleDataset ? (\r\n    <LabelErrorBoundary>\r\n      <UniversalDataViewer\r\n        datasetName={`Sample ${singleSampleDataset.sampleIndex}`}\r\n        onSaveTaskOutputItem={(relativeIndex, output) => {\r\n          const {\r\n            sampleIndex,\r\n            samples: [sample],\r\n          } = singleSampleDataset\r\n\r\n          let newDataset = dataset\r\n          newDataset = setIn(\r\n            newDataset,\r\n            [\"samples\", sampleIndex, \"annotation\"],\r\n            output\r\n          )\r\n\r\n          if (\r\n            sample.brush !== selectedBrush &&\r\n            !(sample.brush === undefined && selectedBrush === \"complete\")\r\n          ) {\r\n            newDataset = setIn(\r\n              newDataset,\r\n              [\"samples\", sampleIndex, \"brush\"],\r\n              selectedBrush\r\n            )\r\n          }\r\n\r\n          onChangeSingleSampleDataset(\r\n            setIn(singleSampleDataset, [\"samples\", 0, \"annotation\"], output)\r\n          )\r\n          onChangeDataset(newDataset)\r\n        }}\r\n        onExit={(nextAction = \"nothing\") => {\r\n          if (singleSampleDataset.startTime) {\r\n            onChangeSampleTimeToComplete(\r\n              Date.now() - singleSampleDataset.startTime\r\n            )\r\n          }\r\n          const { sampleIndex } = singleSampleDataset\r\n          switch (nextAction) {\r\n            case \"go-to-next\":\r\n              if (sampleIndex !== dataset.samples.length - 1) {\r\n                posthog.capture(\"next_sample\", {\r\n                  interface_type: dataset.interface.type,\r\n                })\r\n                onChangeSingleSampleDataset({\r\n                  ...dataset,\r\n                  samples: [dataset.samples[sampleIndex + 1]],\r\n                  sampleIndex: sampleIndex + 1,\r\n                  startTime: Date.now(),\r\n                })\r\n                return\r\n              }\r\n              break\r\n            case \"go-to-previous\":\r\n              if (sampleIndex !== 0) {\r\n                onChangeSingleSampleDataset({\r\n                  ...dataset,\r\n                  samples: [dataset.samples[sampleIndex - 1]],\r\n                  sampleIndex: sampleIndex - 1,\r\n                  startTime: Date.now(),\r\n                })\r\n                return\r\n              }\r\n              break\r\n            default:\r\n              break\r\n          }\r\n          onChangeSingleSampleDataset(null)\r\n        }}\r\n        dataset={singleSampleDataset}\r\n        onClickSetup={onClickSetup}\r\n      />\r\n    </LabelErrorBoundary>\r\n  ) : (\r\n    <OverviewContainer>\r\n      <Box display=\"flex\">\r\n        <Box>\r\n          <Tabs value={currentTab} onChange={(e, newTab) => setTab(newTab)}>\r\n            <Tab icon={<BorderColorIcon />} label=\"Label\" value=\"label\" />\r\n            {/* {!labelOnlyMode && (\r\n              <Tab\r\n                icon={<DataUsageIcon />}\r\n                label=\"Active Learning\"\r\n                value=\"activelearning\"\r\n              />\r\n            )} */}\r\n          </Tabs>\r\n        </Box>\r\n        <Box flexGrow={1} />\r\n        <Stats\r\n          stats={[\r\n            {\r\n              name: \"Percent Complete\",\r\n              value: Math.floor(percentComplete * 100) + \"%\",\r\n            },\r\n            {\r\n              name: \"Time per Sample\",\r\n              value: duration(\r\n                new Date(Date.now() - sampleTimeToComplete)\r\n              ).toString(1, 1),\r\n            },\r\n            {\r\n              name: \"Estimated Remaining\",\r\n              value: duration(\r\n                new Date(\r\n                  Date.now() -\r\n                    sampleTimeToComplete *\r\n                      (1 - percentComplete) *\r\n                      (dataset.samples || []).length\r\n                )\r\n              ).toString(1, 2),\r\n            },\r\n          ]}\r\n        />\r\n      </Box>\r\n      <Box flexGrow={1}>\r\n        {currentTab === \"label\" && (\r\n          <SampleGrid\r\n            count={(dataset.samples || []).length}\r\n            samples={dataset.samples || []}\r\n            completed={(dataset.samples || []).map((s) =>\r\n              Boolean(s.annotation)\r\n            )}\r\n            onClick={(sampleIndex) => {\r\n              posthog.capture(\"open_sample\", {\r\n                interface_type: dataset.interface.type,\r\n              })\r\n              onChangeSingleSampleDataset({\r\n                ...dataset,\r\n                samples: [dataset.samples[sampleIndex]],\r\n                sampleIndex,\r\n                startTime: Date.now(),\r\n              })\r\n            }}\r\n          />\r\n        )}\r\n        \r\n      </Box>\r\n    </OverviewContainer>\r\n  )\r\n}\r\n","// @flow\r\n\r\nimport React, { useState, useEffect, useMemo } from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\n\r\nimport Header from \"../Header\"\r\nimport AceEditor from \"react-ace\"\r\nimport EditableTitleText from \"./EditableTitleText.js\"\r\nimport SamplesView from \"../SamplesView\"\r\nimport InterfacePage from \"../InterfacePage\"\r\nimport EditSampleDialog from \"../EditSampleDialog\"\r\nimport useTimeToCompleteSample from \"../../utils/use-time-to-complete-sample.js\"\r\nimport TextField from \"@material-ui/core/TextField\"\r\nimport { useToasts } from \"../Toasts\"\r\nimport { setIn, without } from \"seamless-immutable\"\r\nimport useEventCallback from \"use-event-callback\"\r\nimport usePosthog from \"../../utils/use-posthog\"\r\nimport classnames from \"classnames\"\r\nimport LabelView from \"../LabelView\"\r\nimport useIsLabelOnlyMode from \"../../utils/use-is-label-only-mode\"\r\nimport { HotKeys } from \"react-hotkeys\"\r\nimport { useHotkeyStorage } from \"../HotkeyStorage\"\r\n\r\nimport \"brace/mode/javascript\"\r\nimport \"brace/theme/github\"\r\n\r\nconst useStyles = makeStyles({\r\n  headerButton: {\r\n    color: \"#fff\",\r\n  },\r\n  saveIcon: {\r\n    marginRight: 4,\r\n  },\r\n  editIcon: {\r\n    marginLeft: 4,\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    width: \"100vw\",\r\n    height: \"100vh\",\r\n  },\r\n})\r\n\r\nexport default ({\r\n  file,\r\n  datasetName = \"Universal Data Tool\",\r\n  dataset,\r\n  content,\r\n  inSession,\r\n  url,\r\n  fileName = \"unnamed\",\r\n  onChangeDataset = () => null,\r\n  onChangeFile,\r\n  onFileDrop,\r\n  initialMode = \"setup\",\r\n  authConfig,\r\n  user,\r\n  recentItems,\r\n  selectedBrush,\r\n}) => {\r\n  // const labelOnlyMode = useIsLabelOnlyMode()\r\n  var [valueDisplay, setValueDisplay] = useState(fileName)\r\n  const c = useStyles()\r\n  const { addToast } = useToasts()\r\n  const [mode, changeMode] = useState(initialMode)\r\n  const [singleSampleDataset, setSingleSampleDataset] = useState()\r\n  const [sampleInputEditor, changeSampleInputEditor] = useState({})\r\n  const [jsonText, changeJSONText] = useState()\r\n \r\n  const posthog = usePosthog()\r\n\r\n  const headerTabs =[\"Setup\", \"Samples\", \"Label\"]\r\n\r\n  const [\r\n    sampleTimeToComplete,\r\n    changeSampleTimeToComplete,\r\n  ] = useTimeToCompleteSample()\r\n\r\n  // useEffect(() => {\r\n  //   if (!ipcRenderer) return\r\n  //   const onOpenSettingsPage = () => changeMode(\"settings\")\r\n  //   const onOpenSamplesPage = () => changeMode(\"samples\")\r\n  //   const onOpenLabelPage = () => changeMode(\"label\")\r\n  //   ipcRenderer.on(\"open-settings-page\", onOpenSettingsPage)\r\n  //   ipcRenderer.on(\"open-samples-page\", onOpenSamplesPage)\r\n  //   ipcRenderer.on(\"open-label-page\", onOpenLabelPage)\r\n  //   return () => {\r\n  //     ipcRenderer.removeListener(\"open-settings-page\", onOpenSettingsPage)\r\n  //     ipcRenderer.removeListener(\"open-samples-page\", onOpenSamplesPage)\r\n  //     ipcRenderer.removeListener(\"open-label-page\", onOpenLabelPage)\r\n  //   }\r\n  // }, [ipcRenderer])\r\n\r\n  useEffect(() => {\r\n    if (mode === \"json\") {\r\n      changeJSONText(JSON.stringify(dataset, null, \"  \"))\r\n    }\r\n    if (mode !== \"label\") {\r\n      setSingleSampleDataset(null)\r\n    }\r\n    posthog.capture(\"open_editor_tab\", { tab: mode })\r\n  }, [mode, posthog, changeJSONText, dataset])\r\n\r\n  useEffect(() => {\r\n    if (!jsonText || mode !== \"json\") return\r\n    try {\r\n      // TODO schema validation etc.\r\n      onChangeDataset(JSON.parse(jsonText))\r\n    } catch (e) {}\r\n  }, [jsonText, mode, onChangeDataset])\r\n\r\n  const onChangeTab = useEventCallback((tab) => changeMode(tab.toLowerCase()))\r\n\r\n  const shortcutHandlers = useMemo(\r\n    () => ({\r\n      switch_to_label: () => changeMode(\"label\"),\r\n      switch_to_setup: () => changeMode(\"setup\"),\r\n      switch_to_samples: () => changeMode(\"samples\"),\r\n    }),\r\n    [changeMode]\r\n  )\r\n\r\n  const { keyMap } = useHotkeyStorage()\r\n\r\n  return (\r\n    <HotKeys allowChanges handlers={shortcutHandlers} keyMap={keyMap}>\r\n      <div className={classnames(c.container, \"universaldatatool\")}>\r\n        <Header\r\n          title={\r\n            inSession ? (\r\n              <TextField\r\n                label=\"Share Link\"\r\n                title=\"share-link\"\r\n                value={url}\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n              />\r\n            ) : (\r\n              <EditableTitleText\r\n                label=\"File Name\"\r\n                onChange={(newName) => {\r\n                  onChangeFile(setIn(file, [\"fileName\"], newName))\r\n                  setValueDisplay(newName)\r\n                }}\r\n                value={valueDisplay || \"\"}\r\n              />\r\n            )\r\n          }\r\n          onChangeTab={onChangeTab}\r\n          currentTab={mode}\r\n          tabs={headerTabs}\r\n        />\r\n        <div style={{ height: \"100%\", overflowY: \"scroll\" }}>\r\n          {mode === \"json\" && (\r\n            <AceEditor\r\n              theme=\"github\"\r\n              mode=\"javascript\"\r\n              width=\"100%\"\r\n              value={jsonText || \"\"}\r\n              editorProps={{ $blockScrolling: Infinity }}\r\n              onChange={(t) => changeJSONText(t)}\r\n            />\r\n          )}\r\n          {mode === \"setup\" && (\r\n            <InterfacePage\r\n              onClickEditJSON={() => changeMode(\"json\")}\r\n              dataset={dataset}\r\n              onClearLabelData={() => {\r\n                onChangeDataset(\r\n                  setIn(\r\n                    dataset,\r\n                    [\"samples\"],\r\n                    dataset.samples.map((s) => without(s, \"annotation\"))\r\n                  )\r\n                )\r\n              }}\r\n              onChange={(iface) => {\r\n                if (\r\n                  iface.type !== dataset.interface.type &&\r\n                  dataset.interface.type !== \"empty\" &&\r\n                  dataset.samples.map((s) => s.annotation).some(Boolean)\r\n                ) {\r\n                  addToast(\r\n                    \"Changing label types can cause label data issues. You must clear all label data first.\",\r\n                    \"error\"\r\n                  )\r\n                  return\r\n                }\r\n                onChangeDataset({\r\n                  ...dataset,\r\n                  interface: iface,\r\n                })\r\n              }}\r\n            />\r\n          )}\r\n          {mode === \"samples\" && (\r\n            <SamplesView\r\n              file={file}\r\n              dataset={dataset}\r\n              openSampleLabelEditor={(sampleIndex) => {\r\n                setSingleSampleDataset({\r\n                  ...dataset,\r\n                  samples: [dataset.samples[sampleIndex]],\r\n                  sampleIndex,\r\n                  annotationStartTime: Date.now(),\r\n                })\r\n                posthog.capture(\"open_sample\", {\r\n                  interface_type: dataset.interface.type,\r\n                })\r\n                changeMode(\"label\")\r\n              }}\r\n              openSampleInputEditor={(sampleIndex) => {\r\n                changeSampleInputEditor({ open: true, sampleIndex })\r\n              }}\r\n              deleteSample={(sampleIndex) => {\r\n                const newSamples = [...dataset.samples]\r\n                newSamples.splice(sampleIndex, 1)\r\n                onChangeDataset({\r\n                  ...dataset,\r\n                  samples: newSamples,\r\n                })\r\n              }}\r\n              onChangeFile={(file) => {\r\n                onChangeFile(file)\r\n                setValueDisplay(file.fileName)\r\n              }}\r\n              onChangeDataset={onChangeDataset}\r\n              authConfig={authConfig}\r\n              user={user}\r\n            />\r\n          )}\r\n          {mode === \"label\" && (\r\n            <LabelView\r\n              selectedBrush={selectedBrush}\r\n              dataset={dataset}\r\n              sampleTimeToComplete={sampleTimeToComplete}\r\n              onChangeSampleTimeToComplete={changeSampleTimeToComplete}\r\n              onChangeDataset={onChangeDataset}\r\n              singleSampleDataset={singleSampleDataset}\r\n              onChangeSingleSampleDataset={setSingleSampleDataset}\r\n              onClickSetup={() => changeMode(\"setup\")}\r\n            />\r\n          )}\r\n        </div>\r\n        <EditSampleDialog\r\n          {...sampleInputEditor}\r\n          sampleInput={\r\n            sampleInputEditor.sampleIndex !== undefined\r\n              ? dataset.samples[sampleInputEditor.sampleIndex]\r\n              : null\r\n          }\r\n          onClose={() => {\r\n            changeSampleInputEditor({ open: false })\r\n          }}\r\n          onChange={(newInput) => {\r\n            onChangeDataset(\r\n              setIn(\r\n                dataset,\r\n                [\"samples\", sampleInputEditor.sampleIndex],\r\n                newInput\r\n              )\r\n            )\r\n          }}\r\n        />\r\n      </div>\r\n    </HotKeys>\r\n  )\r\n}\r\n","import { useReducer } from \"react\"\r\n\r\nexport default () => {\r\n  const [{ timeToCompleteSample }, changeSampleTimeToComplete] = useReducer(\r\n    (state, newTimeToComplete) => {\r\n      const newSamplesInWindow = state.samplesInWindow\r\n        .slice(-10)\r\n        .concat([newTimeToComplete])\r\n      return {\r\n        timeToCompleteSample:\r\n          newSamplesInWindow.reduce((acc, a) => acc + a, 0) /\r\n          newSamplesInWindow.length,\r\n        samplesInWindow: newSamplesInWindow,\r\n      }\r\n    },\r\n    { timeToCompleteSample: 0, samplesInWindow: [] }\r\n  )\r\n  return [timeToCompleteSample, changeSampleTimeToComplete]\r\n}\r\n","// @flow\r\nimport React from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport { red } from \"@material-ui/core/colors\"\r\nimport Collapse from \"@material-ui/core/Collapse\"\r\nimport Fade from \"@material-ui/core/Fade\"\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: \"fixed\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    alignItems: \"center\",\r\n    pointerEvents: \"none\",\r\n  },\r\n  errorBox: {\r\n    display: \"flex\",\r\n    backgroundColor: red[700],\r\n    color: \"#fff\",\r\n    padding: 4,\r\n    marginBottom: 4,\r\n  },\r\n})\r\n\r\nexport default ({ errors }) => {\r\n  const c = useStyles()\r\n  return (\r\n    <div className={c.root}>\r\n      {errors.map((err) => (\r\n        <Collapse key={err.id} in={err.life < 5000}>\r\n          <Fade in={err.life > 500}>\r\n            <div className={c.errorBox}>{err.message}</div>\r\n          </Fade>\r\n        </Collapse>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n","// @flow weak\r\n\r\nexport default (changeLog) => {\r\n  const humanReadableChangeLog = []\r\n  for (const { userName, op, path } of changeLog) {\r\n    if (path.startsWith(\"/interface\")) {\r\n      humanReadableChangeLog.push({\r\n        type: \"warning\",\r\n        message: `${userName} changed the project settings`,\r\n      })\r\n    } else if (path.startsWith(\"/taskOutput\")) {\r\n      const sampleMatch = path.match(/\\/samples\\/([^/]+)/)\r\n      humanReadableChangeLog.push({\r\n        type: \"info\",\r\n        message: `${userName} changed sample ${sampleMatch[1]}`,\r\n      })\r\n    } else {\r\n      humanReadableChangeLog.push({\r\n        message: `${userName} did a ${op} at ${path}`,\r\n        type: \"info\",\r\n      })\r\n    }\r\n  }\r\n  return humanReadableChangeLog\r\n}\r\n","/*\r\nThis doesn't handle a fair number of edge cases, for the full specification\r\nfor what it should implement, see https://tools.ietf.org/html/rfc6902\r\n\r\nWhen applySeamlessPatch is called, it usually is accompanied by a object hash\r\ncheck to make sure that the patch applied correctly, and if not, perform\r\na download of the latest version. Because of this, we can safely ignore the\r\ntricky edge cases.\r\n*/\r\n\r\nimport seamless from \"seamless-immutable\"\r\n\r\nconst { setIn, getIn, updateIn, without } = seamless\r\n\r\nfunction addToArray(a, newValue) {\r\n  return a.concat([newValue])\r\n}\r\n\r\nfunction withoutIn(obj, path) {\r\n  if (path.length === 0) return without(obj, path[0])\r\n  const parentPath = path.slice(0, -1)\r\n  const key = path[path.length - 1]\r\n  const parentObj = getIn(obj, parentPath)\r\n  if (Array.isArray(parentObj)) {\r\n    const index = parseInt(key)\r\n    return setIn(obj, parentPath, [\r\n      ...parentObj.slice(0, index),\r\n      ...parentObj.slice(index + 1),\r\n    ])\r\n  } else {\r\n    return setIn(obj, parentPath, without(parentObj, key))\r\n  }\r\n}\r\n\r\nexport default (object, patches) => {\r\n  for (const patch of patches) {\r\n    let { op, path } = patch\r\n    path = path.split(\"/\").filter(Boolean)\r\n    if (path.length === 0) {\r\n      // this operation is on the root object, special handling should apply\r\n      if (op === \"replace\") {\r\n        object = patch.value\r\n        continue\r\n      }\r\n      throw new Error(\"Operation on root object not supported\")\r\n    }\r\n    switch (op) {\r\n      case \"replace\": {\r\n        object = setIn(object, path, patch.value)\r\n        continue\r\n      }\r\n      case \"copy\": {\r\n        object = setIn(object, path, getIn(object, patch.from.split(\"/\")))\r\n        continue\r\n      }\r\n      case \"add\": {\r\n        if (!isNaN(parseInt(path.slice(-1)[0]))) {\r\n          object = setIn(object, path, patch.value)\r\n        } else {\r\n          const arrayAtPath = Array.isArray(getIn(object, path))\r\n          if (arrayAtPath) {\r\n            object = updateIn(object, path, addToArray, patch.value)\r\n          } else {\r\n            object = setIn(object, path, patch.value)\r\n          }\r\n        }\r\n        continue\r\n      }\r\n      case \"move\": {\r\n        const from = patch.from.split(\"/\")\r\n        object = setIn(object, path, getIn(object, from))\r\n        object = withoutIn(object, from)\r\n        continue\r\n      }\r\n      case \"remove\": {\r\n        object = withoutIn(object, path)\r\n        continue\r\n      }\r\n      default:\r\n        return object\r\n    }\r\n  }\r\n  return object\r\n}\r\n","// This is the same hashing code that the server uses\r\n\r\nconst stringify = require(\"json-stable-stringify\")\r\n\r\nconst hashString = (s) => {\r\n  var hash = 0,\r\n    i,\r\n    chr\r\n  for (i = 0; i < s.length; i++) {\r\n    chr = s.charCodeAt(i)\r\n    hash = (hash << 5) - hash + chr\r\n    hash |= 0\r\n  }\r\n  return hash\r\n}\r\n\r\nexport default (o) => hashString(stringify(o))\r\n","// @flow\r\n\r\nimport { useEffect } from \"react\"\r\nimport CollaborationHandler from \"./handler.js\"\r\nimport { setIn } from \"seamless-immutable\"\r\n\r\nconst serverUrl =\r\n  window.localStorage.CUSTOM_COLLABORATION_SERVER ||\r\n  \"https://udt-collaboration-server.now.sh\"\r\n\r\n// We use a global singleton to manage the collaboration state machine\r\nconst collab = new CollaborationHandler({ serverUrl })\r\n\r\nexport const convertToCollaborativeFile = async (file) => {\r\n  await collab.createSession(file.content)\r\n  return {\r\n    fileName: file.fileName,\r\n    id: file.id,\r\n    sessionId: collab.sessionId,\r\n    url: `${window.location.origin}?s=${collab.sessionId}`,\r\n    content: file.content,\r\n    mode: \"server\",\r\n  }\r\n}\r\n\r\nexport const joinSession = async (sessionId) => {\r\n  await collab.joinSession(sessionId)\r\n  return {\r\n    state: collab.state,\r\n    version: collab.version,\r\n  }\r\n}\r\n\r\nexport default (file, changeFile) => {\r\n  // const { addToast } = useToasts()\r\n  const userName = window.localStorage.userName\r\n  useEffect(() => {\r\n    if (userName && !userName.includes(\"anonymous\")) {\r\n      try {\r\n        collab.userName = JSON.parse(window.localStorage.userName)\r\n      } catch (e) {}\r\n    }\r\n  }, [userName])\r\n\r\n  useEffect(() => {\r\n    if (!file || file.mode !== \"server\") return\r\n    if (file.sessionId !== collab.sessionId) return\r\n\r\n    const checkForLatestPatch = async () => {\r\n      const applyResult = await collab.applyLatestPatches()\r\n\r\n      if (applyResult) {\r\n        // TODO apply in a smart, immutable way\r\n        changeFile(setIn(file, [\"content\"], collab.state))\r\n      }\r\n\r\n      if (!timeout) return\r\n      timeout = setTimeout(checkForLatestPatch, 500)\r\n    }\r\n\r\n    let timeout = setTimeout(checkForLatestPatch, 500)\r\n    return () => {\r\n      clearTimeout(timeout)\r\n      timeout = null\r\n    }\r\n  }, [file, changeFile])\r\n\r\n  // Update the Server State by Sending Patches\r\n  useEffect(() => {\r\n    if (!file || file.mode !== \"server\") return\r\n    collab.sendPatchIfChanged(file.content)\r\n  }, [file])\r\n}\r\n","// @flow weak\r\n// NOTE: for unit tests you need to change the following line to...\r\n// import rfc6902 from \"rfc6902\"\r\nimport * as rfc6902 from \"rfc6902\"\r\nimport bent from \"bent\"\r\nimport getHumanReadableLog from \"./get-human-readable-log.js\"\r\nimport applySeamlessPatch from \"./apply-seamless-patch.js\"\r\nimport hash from \"./server-hash.js\"\r\n\r\nclass CollaborationHandler {\r\n  serverUrl = \"http://localhost:6003\"\r\n  getJSON = (url, payload, opts) => {}\r\n  postJSON = (url, payload, opts) => {}\r\n  patchJSON = (url, payload, opts) => {}\r\n  userName = \"anonymous\"\r\n\r\n  sessionId = null\r\n  state = null\r\n  version = null\r\n\r\n  constructor({ serverUrl, userName }) {\r\n    this.serverUrl = serverUrl\r\n    this.getJSON = bent(\"json\", \"GET\", serverUrl)\r\n    this.postJSON = bent(\"json\", \"POST\", serverUrl)\r\n    this.patchJSON = bent(\"json\", \"PATCH\", serverUrl)\r\n    this.userName =\r\n      userName || `anonymous_${Math.random().toString(36).slice(2, 6)}`\r\n  }\r\n\r\n  async createSession(initialContent) {\r\n    const response = await this.postJSON(\"/api/session\", {\r\n      udt: initialContent,\r\n    })\r\n\r\n    this.state = initialContent\r\n    this.sessionId = response.short_id\r\n    this.version = response.version\r\n  }\r\n\r\n  async getLatestState() {\r\n    try {\r\n      const res = await this.getJSON(\r\n        `/api/session/${encodeURIComponent(this.sessionId)}`\r\n      )\r\n      return {\r\n        state: res.udt_json,\r\n        version: res.version,\r\n      }\r\n    } catch (e) {\r\n      throw new Error(\r\n        `error getting session \"${this.sessionId}\": ${e.toString()}`\r\n      )\r\n    }\r\n  }\r\n\r\n  async updateToLatestState() {\r\n    const { state, version } = await this.getLatestState()\r\n    this.state = state\r\n    this.version = version\r\n  }\r\n\r\n  async joinSession(sessionId) {\r\n    this.sessionId = sessionId\r\n    await this.updateToLatestState()\r\n  }\r\n\r\n  async applyLatestPatches() {\r\n    const {\r\n      patch,\r\n      hashOfLatestState,\r\n      latestVersion,\r\n      changeLog,\r\n    } = await this.getJSON(\r\n      `/api/session/${encodeURIComponent(this.sessionId)}/diffs?since=${\r\n        this.version\r\n      }`\r\n    )\r\n\r\n    if (patch.length === 0 || latestVersion === this.version) {\r\n      return null\r\n    }\r\n\r\n    const humanReadableLog = getHumanReadableLog(changeLog)\r\n\r\n    let newState = applySeamlessPatch(this.state, patch)\r\n\r\n    if (hash(newState) !== hashOfLatestState) {\r\n      console.error(\"new state with patches applied didn't match latest state\")\r\n      await this.updateToLatestState()\r\n      return { patch, changeLog: humanReadableLog }\r\n    }\r\n\r\n    this.state = newState\r\n    this.version = latestVersion\r\n    return { patch, changeLog: humanReadableLog }\r\n  }\r\n\r\n  async sendPatchIfChanged(newState) {\r\n    const patch = rfc6902.createPatch(this.state, newState)\r\n    if (patch.length === 0) return null\r\n\r\n    const { hashOfLatestState, latestVersion } = await this.patchJSON(\r\n      `/api/session/${encodeURIComponent(this.sessionId)}`,\r\n      {\r\n        patch,\r\n        userName: this.userName,\r\n      }\r\n    )\r\n\r\n    if (hash(newState) !== hashOfLatestState) {\r\n      console.error(\r\n        \"after patch, hashes were not equal! getting latest version from server...\"\r\n      )\r\n      await this.updateToLatestState()\r\n      return this\r\n    }\r\n\r\n    this.state = newState\r\n    this.version = latestVersion\r\n    return this\r\n  }\r\n}\r\n\r\nexport default CollaborationHandler\r\n","import JAC from \"jac-format\"\r\nimport range from \"lodash/range\"\r\nimport { flatten } from \"flat\"\r\n\r\nexport default (obj) => {\r\n  const AddSamplesKeys = (k) => {\r\n    sampleKeys.add(k)\r\n  }\r\n  // Find all possible sample keys\r\n  let sampleKeys = new Set()\r\n  for (const sample of obj.samples) {\r\n    Object.keys(flatten(sample)).forEach((k) => AddSamplesKeys(k))\r\n  }\r\n  sampleKeys = Array.from(sampleKeys).sort(\r\n    (a, b) => a.split(\".\").length - b.split(\".\").length\r\n  )\r\n\r\n  if (sampleKeys.some((k) => k.includes(\"output.keyframes\"))) {\r\n    sampleKeys = sampleKeys.filter((k) => k.includes(\"output.keyframes\"))\r\n    sampleKeys.push(\"output.keyframes\")\r\n  }\r\n\r\n  const options = {\r\n    rows: [\r\n      \"interface\",\r\n      ...range(obj.samples.length).map((i) => `samples.${i}`),\r\n    ],\r\n    columns: [\".\", ...sampleKeys],\r\n  }\r\n\r\n  return JAC.toCSV(obj, options)\r\n}\r\n","// @flow\r\n\r\nimport { useEffect } from \"react\"\r\nimport useEventCallback from \"use-event-callback\"\r\n// import useElectron from \"../use-electron.js\"\r\nimport { useToasts } from \"../../components/Toasts\"\r\nimport { setIn } from \"seamless-immutable\"\r\nimport toUDTCSV from \"../to-udt-csv.js\"\r\nimport useIsDesktop from \"../use-is-desktop\"\r\n\r\nconst webReturn = { saveFile: () => null }\r\n\r\nexport default (file, changeFile) => {\r\n  const isDesktop = useIsDesktop()\r\n  if (!isDesktop) return webReturn\r\n  const { addToast } = useToasts()\r\n  // const { remote } = useElectron()\r\n  const saveFile = useEventCallback(({ saveAs = false } = {}) => {\r\n    if (!file) return\r\n    async function saveFileAsync() {\r\n      let filePath = file.filePath\r\n      // if (!file.filePath || saveAs) {\r\n      //   const {\r\n      //     cancelled,\r\n      //     filePath: newFilePath,\r\n      //   } = await remote.dialog.showSaveDialog({\r\n      //     filters: [\r\n      //       { name: \".udt.json\", extensions: [\"udt.json\"] },\r\n      //       { name: \".udt.csv\", extensions: [\"udt.csv\"] },\r\n      //     ],\r\n      //   })\r\n      //   filePath =\r\n      //     !newFilePath ||\r\n      //     newFilePath.endsWith(\".json\") ||\r\n      //     newFilePath.endsWith(\".csv\")\r\n      //       ? newFilePath\r\n      //       : `${newFilePath}.udt.json`\r\n      //   if (cancelled || !filePath) {\r\n      //     addToast(\"Could not save\")\r\n      //     return\r\n      //   }\r\n      //   changeFile({\r\n      //     ...file,\r\n      //     filePath,\r\n      //     fileName: filePath.split(\"/\").slice(-1)[0],\r\n      //   })\r\n      // }\r\n      // await remote\r\n        .require(\"fs\").writeFile(\r\n          filePath,\r\n          filePath.endsWith(\".csv\")\r\n            ? toUDTCSV(file.content)\r\n            : JSON.stringify(file.content, null, \"  \")\r\n        )\r\n      addToast(\"File Saved!\")\r\n    }\r\n    saveFileAsync()\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (!file || !file.filePath) return\r\n    if (file.fileName !== file.filePath.split(\"/\").slice(-1)[0]) {\r\n      changeFile(\r\n        setIn(\r\n          file,\r\n          [\"filePath\"],\r\n          file.filePath\r\n            .split(\"/\")\r\n            .slice(0, -1)\r\n            .concat([\r\n              file.fileName +\r\n                (file.fileName.endsWith(\".json\") ? \"\" : \".dataset.json\"),\r\n            ])\r\n            .join(\"/\")\r\n        )\r\n      )\r\n    }\r\n  }, [file, changeFile])\r\n\r\n  return { saveFile }\r\n}\r\n","// @flow\r\n\r\nexport default () => {\r\n    if (window.require) {\r\n      return Boolean(window.require(\"electron\"))\r\n    }\r\n    return false\r\n  }","// @flow\r\n\r\nimport { useState, useMemo, useEffect } from \"react\"\r\nimport useServer, {\r\n  joinSession,\r\n  convertToCollaborativeFile,\r\n} from \"./use-server\"\r\nimport useFilesystem from \"./use-filesystem\"\r\nimport useLocalStorage from \"./use-local-storage\"\r\nimport { useToasts } from \"../../components/Toasts\"\r\nimport fromUDTCSV from \"../from-udt-csv.js\"\r\nimport useEventCallback from \"use-event-callback\"\r\n// import useFileTelemetry from \"./use-file-telemetry\"\r\n// import useAWSCognito from \"./use-aws-cognito\"\r\n\r\nexport default () => {\r\n  const [file, setFile] = useState()\r\n  const { addToast } = useToasts()\r\n\r\n  const { saveFile } = useFilesystem(file, setFile)\r\n  const { recentItems, changeRecentItems } = useLocalStorage(file, setFile)\r\n  useServer(file, setFile)\r\n\r\n  // // Auth/Cloud\r\n  // useAWSCognito({ file, setFile })\r\n\r\n  // // Telemetry\r\n  // useFileTelemetry(file && file.content)\r\n\r\n  const openFile = useEventCallback((fsFile) => {\r\n    const { name: fileName, path: filePath } = fsFile\r\n\r\n    function handleLoadedFile(content) {\r\n      try {\r\n        let dataset\r\n        if (fileName.endsWith(\"csv\")) {\r\n          dataset = fromUDTCSV(content)\r\n        } else {\r\n          dataset = JSON.parse(content)\r\n        }\r\n        // TODO validate OHA and prompt to open anyway if invalid\r\n        setFile({\r\n          fileName,\r\n          filePath,\r\n          mode: filePath ? \"filesystem\" : \"local-storage\",\r\n          content: dataset,\r\n          id: filePath,\r\n        })\r\n      } catch (e) {\r\n        console.log(e.toString())\r\n        // addToast(\"Couldn't read file, see console for details\", \"error\")\r\n        // addError(`Could not read file \"${fsFile.name}\"`)\r\n      }\r\n    }\r\n\r\n    if (fsFile.content) {\r\n      handleLoadedFile(fsFile.content)\r\n    } else {\r\n      const reader = new FileReader()\r\n      reader.onload = (e) => {\r\n        const content = e.target.result\r\n        handleLoadedFile(content)\r\n      }\r\n      reader.readAsText(fsFile)\r\n    }\r\n  })\r\n\r\n  const openUrl = useEventCallback(async (url) => {\r\n    const sessionId = decodeURIComponent(url.match(/[?&]s=([^&]+)/)[1])\r\n    const labelOnly = url.includes(\"mode=labelonly\")\r\n    if (!sessionId) return\r\n    const { state } = await joinSession(sessionId)\r\n    if (!state) return\r\n    window.history.replaceState(\r\n      {},\r\n      window.document.title,\r\n      `/?s=${encodeURIComponent(sessionId)}${\r\n        labelOnly ? \"&mode=labelonly\" : \"\"\r\n      }`\r\n    )\r\n    setFile({\r\n      url,\r\n      sessionId,\r\n      mode: \"server\",\r\n      id: sessionId,\r\n      content: state,\r\n    })\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (!file) return\r\n    if (file.mode === \"server\") return\r\n    window.history.replaceState({}, window.document.title, `/`)\r\n  }, [file])\r\n\r\n  useEffect(() => {\r\n    if (window.location.search.match(/[?&]s=([a-zA-Z0-9]+)/)) {\r\n      openUrl(window.location.href)\r\n    }\r\n  }, [openUrl])\r\n\r\n  const makeSession = useEventCallback(async () => {\r\n    const newFile = await convertToCollaborativeFile(file)\r\n    setFile(newFile)\r\n    window.history.replaceState(\r\n      {},\r\n      window.document.title,\r\n      `/?s=${encodeURIComponent(newFile.sessionId)}`\r\n    )\r\n  })\r\n\r\n  return useMemo(\r\n    () => ({\r\n      file,\r\n      setFile,\r\n      openFile,\r\n      openUrl,\r\n      makeSession,\r\n      saveFile,\r\n      recentItems,\r\n      changeRecentItems,\r\n    }),\r\n    [\r\n      file,\r\n      setFile,\r\n      openFile,\r\n      saveFile,\r\n      makeSession,\r\n      recentItems,\r\n      changeRecentItems,\r\n      openUrl,\r\n    ]\r\n  )\r\n}\r\n","// @flow\r\nimport { useEffect } from \"react\"\r\nimport { useLocalStorage } from \"react-use\"\r\n\r\nexport default (file, changeFile) => {\r\n  let [recentItems, changeRecentItems] = useLocalStorage(\"recentItems\", [])\r\n\r\n  if (!recentItems) recentItems = []\r\n  useEffect(() => {\r\n    if (!file || file.fileName === \"unnamed\") return\r\n    if (recentItems.map((item) => item.id).includes(file.id)) {\r\n      changeRecentItems(\r\n        recentItems.map((ri) => (ri.id === file.id ? file : ri))\r\n      )\r\n    } else {\r\n      changeRecentItems([file].concat(recentItems).slice(0, 3))\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [file, changeRecentItems])\r\n  return { recentItems, changeRecentItems }\r\n}\r\n","// @flow weak\r\n\r\nimport React from \"react\"\r\nimport { styled } from \"@material-ui/core/styles\"\r\nimport * as colors from \"@material-ui/core/colors\"\r\nimport { detect } from \"detect-browser\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport Sentry from \"../../utils/sentry.js\"\r\n\r\nconst Container = styled(\"div\")({\r\n  width: \"100vw\",\r\n  minHeight: \"100vh\",\r\n  backgroundColor: colors.grey[900],\r\n  padding: 32,\r\n  \"& .title\": {\r\n    color: colors.grey[200],\r\n    fontSize: 24,\r\n    fontWeight: \"bold\",\r\n  },\r\n  \"& .subtitle\": {\r\n    color: colors.grey[300],\r\n    fontSize: 18,\r\n    marginTop: 8,\r\n  },\r\n  \"& .info\": {\r\n    width: \"100%\",\r\n    boxSizing: \"border-box\",\r\n    padding: 32,\r\n    \"& textarea\": {\r\n      width: \"calc(100% - 64px)\",\r\n      boxSizing: \"border-box\",\r\n      minHeight: 300,\r\n      fontSize: 12,\r\n    },\r\n  },\r\n})\r\nconst Buttons = styled(\"div\")({\r\n  padding: 8,\r\n})\r\nconst StyledButton = styled(Button)({\r\n  color: \"#fff\",\r\n  borderColor: \"rgba(255,255,255,0.5)\",\r\n  margin: 8,\r\n})\r\n\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { hasError: false }\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return {\r\n      hasError: true,\r\n      errorDetails: JSON.stringify(detect()) + \"\\n\\n\" + error.stack,\r\n    }\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    // You can also log the error to an error reporting service\r\n    Sentry.withScope((scope) => {\r\n      scope.setExtras(errorInfo)\r\n      const eventId = Sentry.captureException(error)\r\n      this.setState({ eventId })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return (\r\n        <Container>\r\n          <div className=\"title\">An error has occurred</div>\r\n          <div className=\"subtitle\">All the details are below:</div>\r\n          <div className=\"info\">\r\n            <textarea>{this.state.errorDetails}</textarea>\r\n          </div>\r\n          <Buttons>\r\n            <StyledButton\r\n              variant=\"outlined\"\r\n              onClick={() => window.location.reload()}\r\n            >\r\n              Reload (unsaved progress will be lost)\r\n            </StyledButton>\r\n          </Buttons>\r\n        </Container>\r\n      )\r\n    }\r\n\r\n    return this.props.children\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary\r\n","// @flow weak\r\n\r\nimport { useEffect } from \"react\"\r\n\r\nfunction preventNavigation(e) {\r\n  var confirmationMessage =\r\n    \"It looks like you have been editing something. \" +\r\n    \"If you leave before saving, your changes will be lost.\"\r\n\r\n  ;(e || window.event).returnValue = confirmationMessage //Gecko + IE\r\n  return confirmationMessage //Gecko + Webkit, Safari, Chrome etc.\r\n}\r\n\r\nexport default (shouldPreventNavigation = true) => {\r\n  useEffect(() => {\r\n    if (!shouldPreventNavigation) return\r\n    if (window.location.origin.includes(\"localhost\")) return\r\n    window.addEventListener(\"beforeunload\", preventNavigation)\r\n    return () => {\r\n      window.removeEventListener(\"beforeunload\", preventNavigation)\r\n    }\r\n  }, [shouldPreventNavigation])\r\n}\r\n","import { useContext, createContext } from \"react\"\r\n\r\nexport const FileContext = createContext({})\r\n\r\nexport const useFileContext = () => useContext(FileContext)\r\n\r\nexport { useActiveDataset } from \"./use-active-dataset.js\"\r\n","// @flow\r\nimport React, { useState, useCallback } from \"react\"\r\nimport { HeaderContext } from \"../Header\"\r\nimport StartingPage from \"../StartingPage\"\r\nimport DatasetEditor from \"../DatasetEditor\"\r\nimport ErrorToasts from \"../ErrorToasts\"\r\nimport useErrors from \"../../utils/use-errors.js\"\r\nimport useFileHandler from \"../../utils/file-handlers\"\r\nimport download from \"in-browser-download\"\r\nimport toUDTCSV from \"../../utils/to-udt-csv.js\"\r\nimport { setIn } from \"seamless-immutable\"\r\nimport AppErrorBoundary from \"../AppErrorBoundary\"\r\nimport useEventCallback from \"use-event-callback\"\r\nimport usePreventNavigation from \"../../utils/use-prevent-navigation\"\r\nimport { FileContext } from \"../FileContext\"\r\nconst randomId = () => Math.random().toString().split(\".\")[1]\r\n\r\nexport default () => {\r\n  const {\r\n    file,\r\n    setFile,\r\n    openFile,\r\n    openUrl,\r\n    makeSession,\r\n    recentItems,\r\n    changeRecentItems,\r\n  } = useFileHandler()\r\n  usePreventNavigation(Boolean(file))\r\n  const [errors] = useErrors()\r\n\r\n  const [selectedBrush, setSelectedBrush] = useState(\"complete\")\r\n  const onCreateTemplate = useEventCallback((template) => {\r\n    setFile({\r\n      fileName: \"unnamed\",\r\n      content: template.dataset,\r\n      id: randomId(),\r\n      mode: \"local-storage\",\r\n    })\r\n  })\r\n\r\n  const openRecentItem = useEventCallback((item) => setFile(item))\r\n  const onClickHome = useEventCallback(() => setFile(null))\r\n  const onDownload = useEventCallback((format) => {\r\n    if (!file) return\r\n    const outputName = (file.sessionId || file.fileName) + \".udt.\" + format\r\n    if (format === \"json\") {\r\n      download(JSON.stringify(file.content), outputName)\r\n    } else if (format === \"csv\") {\r\n      download(toUDTCSV(file.content), outputName)\r\n    }\r\n  })\r\n\r\n  const inSession = file && file.mode === \"server\"\r\n  const [sessionBoxOpen, changeSessionBoxOpen] = useState(false)\r\n\r\n  const onJoinSession = useCallback(\r\n    async (sessionName) => {\r\n      await openUrl(sessionName)\r\n    },\r\n    [openUrl]\r\n  )\r\n\r\n  const onLeaveSession = useEventCallback(() =>\r\n    setFile({\r\n      ...file,\r\n      mode: \"local-storage\",\r\n      fileName: file.fileName || `copy_of_${file.id}`,\r\n    })\r\n  )\r\n\r\n  const onChangeDataset = useEventCallback((newOHA) => {\r\n    setFile(setIn(file, [\"content\"], newOHA))\r\n  })\r\n\r\n  return (\r\n    <>\r\n      <FileContext.Provider value={{ file, setFile }}>\r\n        <HeaderContext.Provider\r\n          value={{\r\n            title: file\r\n              ? file.mode === \"local-storage\"\r\n                ? file.fileName\r\n                : file.url\r\n              : \"unnamed\",\r\n            recentItems,\r\n            changeRecentItems,\r\n            onClickTemplate: onCreateTemplate,\r\n            onClickHome,\r\n            onOpenFile: openFile,\r\n            onOpenRecentItem: openRecentItem,\r\n            inSession,\r\n            sessionBoxOpen,\r\n            changeSessionBoxOpen,\r\n            onJoinSession,\r\n            onLeaveSession,\r\n            onCreateSession: makeSession,\r\n            fileOpen: Boolean(file),\r\n            onDownload,\r\n            onChangeSelectedBrush: setSelectedBrush,\r\n            selectedBrush,\r\n            isWelcomePage: !file,\r\n          }}\r\n        >\r\n          {!file ? (\r\n            <StartingPage\r\n              onFileDrop={openFile}\r\n              onOpenTemplate={onCreateTemplate}\r\n              recentItems={recentItems}\r\n              onOpenRecentItem={openRecentItem}\r\n              onClickOpenSession={() => changeSessionBoxOpen(true)}\r\n            />\r\n          ) : (\r\n            <AppErrorBoundary>\r\n              <DatasetEditor\r\n                file={file}\r\n                key={file.id}\r\n                {...file}\r\n                selectedBrush={selectedBrush}\r\n                inSession={inSession}\r\n                dataset={file.content}\r\n                onChangeDataset={onChangeDataset}\r\n                onChangeFile={setFile}\r\n                authConfig\r\n                recentItems={recentItems}\r\n              />\r\n            </AppErrorBoundary>\r\n          )}\r\n        </HeaderContext.Provider>\r\n      </FileContext.Provider>\r\n      <ErrorToasts errors={errors} />\r\n    </>\r\n  )\r\n}\r\n","// @flow\r\n\r\nimport { useState, useEffect } from \"react\"\r\n\r\nconst REFRESH_INTERVAL = 100\r\n\r\nexport default () => {\r\n  const [errors, changeErrors] = useState([])\r\n  useEffect(() => {\r\n    if (errors.length === 0) return () => {}\r\n    let interval = setInterval(() => {\r\n      changeErrors(\r\n        errors\r\n          .map((err) => ({\r\n            ...err,\r\n            life: err.life - REFRESH_INTERVAL,\r\n          }))\r\n          .filter((err) => err.life > 0)\r\n      )\r\n    }, REFRESH_INTERVAL)\r\n    return () => clearInterval(interval)\r\n  }, [errors])\r\n\r\n  function addError(message: string) {\r\n    changeErrors(\r\n      errors.concat([\r\n        {\r\n          id: Math.random().toString().split(\".\")[1],\r\n          message,\r\n          life: 5000,\r\n        },\r\n      ])\r\n    )\r\n  }\r\n\r\n  return [errors, addError]\r\n}\r\n","import React from \"react\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  wrapper: {\r\n    width: \"100vw\",\r\n    height: \"100vh\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    \"& > * + *\": {\r\n      marginLeft: theme.spacing(2),\r\n    },\r\n  },\r\n}))\r\n\r\nexport default function Loading() {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      <div className={classes.root}>\r\n        <CircularProgress />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n","import React, { Suspense } from \"react\"\r\nimport Theme from \"./components/Theme\"\r\nimport LocalStorageApp from \"./components/LocalStorageApp\"\r\nimport { ToastProvider } from \"./components/Toasts\"\r\nimport { AppConfigProvider } from \"./components/AppConfig\"\r\nimport { HotkeyStorageProvider } from \"./components/HotkeyStorage\"\r\nimport \"./App.css\"\r\n\r\nimport Loading from \"./components/Loading\"\r\n\r\n// Importing Internalization file\r\n\r\n\r\nexport const App = () => {\r\n  \r\n  return (\r\n    <Suspense fallback={Loading}>\r\n      <Theme>\r\n        <AppConfigProvider>\r\n            <ToastProvider>\r\n                <HotkeyStorageProvider>\r\n                  <LocalStorageApp />\r\n                </HotkeyStorageProvider>\r\n              </ToastProvider>\r\n        </AppConfigProvider>\r\n      </Theme>\r\n    </Suspense>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport App from \"./App\"\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"))\r\n"],"sourceRoot":""}